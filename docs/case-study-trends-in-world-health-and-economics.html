<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Introduction to Data Science</title>
  <meta name="description" content="This book introduces concepts and skills that can help you tackle real-world data analysis challenges. It covers concepts from probability, statistical inference, linear regression and machine learning and helps you develop skills such as R programming, data wrangling with dplyr, data visualization with ggplot2, file organization with UNIX/Linux shell, version control with GitHub, and reproducible document preparation with R markdown.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Introduction to Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book introduces concepts and skills that can help you tackle real-world data analysis challenges. It covers concepts from probability, statistical inference, linear regression and machine learning and helps you develop skills such as R programming, data wrangling with dplyr, data visualization with ggplot2, file organization with UNIX/Linux shell, version control with GitHub, and reproducible document preparation with R markdown." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Introduction to Data Science" />
  
  <meta name="twitter:description" content="This book introduces concepts and skills that can help you tackle real-world data analysis challenges. It covers concepts from probability, statistical inference, linear regression and machine learning and helps you develop skills such as R programming, data wrangling with dplyr, data visualization with ggplot2, file organization with UNIX/Linux shell, version control with GitHub, and reproducible document preparation with R markdown." />
  

<meta name="author" content="Rafael A. Irizarry">


<meta name="date" content="2018-11-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="ggplot2.html">
<link rel="next" href="data-visualization-principles.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.3.1/str_view.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#case-studies"><i class="fa fa-check"></i><b>1.1</b> Case studies</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#who-will-find-this-book-useful"><i class="fa fa-check"></i><b>1.2</b> Who will find this book useful?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#what-does-this-book-cover"><i class="fa fa-check"></i><b>1.3</b> What does this book cover?</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#what-is-not-covered-by-this-book"><i class="fa fa-check"></i><b>1.4</b> What is not covered by this book?</a></li>
</ul></li>
<li class="part"><span><b>I R Basics</b></span></li>
<li class="chapter" data-level="2" data-path="case-study-us-gun-murders.html"><a href="case-study-us-gun-murders.html"><i class="fa fa-check"></i><b>2</b> Case study: US Gun Murders</a></li>
<li class="chapter" data-level="3" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>3</b> Getting Started</a><ul>
<li class="chapter" data-level="3.1" data-path="getting-started.html"><a href="getting-started.html#why-r"><i class="fa fa-check"></i><b>3.1</b> Why R?</a></li>
<li class="chapter" data-level="3.2" data-path="getting-started.html"><a href="getting-started.html#installing-r"><i class="fa fa-check"></i><b>3.2</b> Installing R</a></li>
<li class="chapter" data-level="3.3" data-path="getting-started.html"><a href="getting-started.html#the-r-console"><i class="fa fa-check"></i><b>3.3</b> The R console</a></li>
<li class="chapter" data-level="3.4" data-path="getting-started.html"><a href="getting-started.html#scripts"><i class="fa fa-check"></i><b>3.4</b> Scripts</a></li>
<li class="chapter" data-level="3.5" data-path="getting-started.html"><a href="getting-started.html#installing-rstudio"><i class="fa fa-check"></i><b>3.5</b> Installing RStudio</a></li>
<li class="chapter" data-level="3.6" data-path="getting-started.html"><a href="getting-started.html#the-r-ecosystem"><i class="fa fa-check"></i><b>3.6</b> The R ecosystem</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-very-basics.html"><a href="the-very-basics.html"><i class="fa fa-check"></i><b>4</b> The very basics</a><ul>
<li class="chapter" data-level="4.1" data-path="the-very-basics.html"><a href="the-very-basics.html#objects"><i class="fa fa-check"></i><b>4.1</b> Objects</a></li>
<li class="chapter" data-level="4.2" data-path="the-very-basics.html"><a href="the-very-basics.html#the-workspace"><i class="fa fa-check"></i><b>4.2</b> The workspace</a></li>
<li class="chapter" data-level="4.3" data-path="the-very-basics.html"><a href="the-very-basics.html#functions"><i class="fa fa-check"></i><b>4.3</b> Functions</a></li>
<li class="chapter" data-level="4.4" data-path="the-very-basics.html"><a href="the-very-basics.html#other-prebuilt-objects"><i class="fa fa-check"></i><b>4.4</b> Other prebuilt objects</a></li>
<li class="chapter" data-level="4.5" data-path="the-very-basics.html"><a href="the-very-basics.html#variable-names"><i class="fa fa-check"></i><b>4.5</b> Variable names</a></li>
<li class="chapter" data-level="4.6" data-path="the-very-basics.html"><a href="the-very-basics.html#saving-your-workspace"><i class="fa fa-check"></i><b>4.6</b> Saving your workspace</a></li>
<li class="chapter" data-level="4.7" data-path="the-very-basics.html"><a href="the-very-basics.html#scripts-1"><i class="fa fa-check"></i><b>4.7</b> Scripts</a></li>
<li class="chapter" data-level="4.8" data-path="the-very-basics.html"><a href="the-very-basics.html#comments"><i class="fa fa-check"></i><b>4.8</b> Comments</a></li>
<li class="chapter" data-level="4.9" data-path="the-very-basics.html"><a href="the-very-basics.html#exercises"><i class="fa fa-check"></i><b>4.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>5</b> Data types</a><ul>
<li class="chapter" data-level="5.1" data-path="data-types.html"><a href="data-types.html#data-frames"><i class="fa fa-check"></i><b>5.1</b> Data frames</a></li>
<li class="chapter" data-level="5.2" data-path="data-types.html"><a href="data-types.html#examining-an-object"><i class="fa fa-check"></i><b>5.2</b> Examining an object</a></li>
<li class="chapter" data-level="5.3" data-path="data-types.html"><a href="data-types.html#the-accessor"><i class="fa fa-check"></i><b>5.3</b> The accessor: <code>$</code></a></li>
<li class="chapter" data-level="5.4" data-path="data-types.html"><a href="data-types.html#vectors-numerics-characters-and-logical"><i class="fa fa-check"></i><b>5.4</b> Vectors: numerics, characters, and logical</a></li>
<li class="chapter" data-level="5.5" data-path="data-types.html"><a href="data-types.html#factors"><i class="fa fa-check"></i><b>5.5</b> Factors</a></li>
<li class="chapter" data-level="5.6" data-path="data-types.html"><a href="data-types.html#lists"><i class="fa fa-check"></i><b>5.6</b> Lists</a></li>
<li class="chapter" data-level="5.7" data-path="data-types.html"><a href="data-types.html#matrices"><i class="fa fa-check"></i><b>5.7</b> Matrices</a></li>
<li class="chapter" data-level="5.8" data-path="data-types.html"><a href="data-types.html#exercises-1"><i class="fa fa-check"></i><b>5.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>6</b> Vectors</a><ul>
<li class="chapter" data-level="6.1" data-path="vectors.html"><a href="vectors.html#creating-vectors"><i class="fa fa-check"></i><b>6.1</b> Creating vectors</a></li>
<li class="chapter" data-level="6.2" data-path="vectors.html"><a href="vectors.html#names"><i class="fa fa-check"></i><b>6.2</b> Names</a></li>
<li class="chapter" data-level="6.3" data-path="vectors.html"><a href="vectors.html#sequences"><i class="fa fa-check"></i><b>6.3</b> Sequences</a></li>
<li class="chapter" data-level="6.4" data-path="vectors.html"><a href="vectors.html#subsetting"><i class="fa fa-check"></i><b>6.4</b> Subsetting</a></li>
<li class="chapter" data-level="6.5" data-path="vectors.html"><a href="vectors.html#coercion"><i class="fa fa-check"></i><b>6.5</b> Coercion</a></li>
<li class="chapter" data-level="6.6" data-path="vectors.html"><a href="vectors.html#not-availables-na"><i class="fa fa-check"></i><b>6.6</b> Not availables (NA)</a></li>
<li class="chapter" data-level="6.7" data-path="vectors.html"><a href="vectors.html#exercises-2"><i class="fa fa-check"></i><b>6.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sorting.html"><a href="sorting.html"><i class="fa fa-check"></i><b>7</b> Sorting</a><ul>
<li class="chapter" data-level="7.1" data-path="sorting.html"><a href="sorting.html#sort"><i class="fa fa-check"></i><b>7.1</b> <code>sort</code></a></li>
<li class="chapter" data-level="7.2" data-path="sorting.html"><a href="sorting.html#order"><i class="fa fa-check"></i><b>7.2</b> <code>order</code></a></li>
<li class="chapter" data-level="7.3" data-path="sorting.html"><a href="sorting.html#max-and-which.max"><i class="fa fa-check"></i><b>7.3</b> <code>max</code> and <code>which.max</code></a></li>
<li class="chapter" data-level="7.4" data-path="sorting.html"><a href="sorting.html#rank"><i class="fa fa-check"></i><b>7.4</b> <code>rank</code></a></li>
<li class="chapter" data-level="7.5" data-path="sorting.html"><a href="sorting.html#beware-of-recycling"><i class="fa fa-check"></i><b>7.5</b> Beware of recycling</a></li>
<li class="chapter" data-level="7.6" data-path="sorting.html"><a href="sorting.html#exercise"><i class="fa fa-check"></i><b>7.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="vector-arithmetics.html"><a href="vector-arithmetics.html"><i class="fa fa-check"></i><b>8</b> Vector arithmetics</a><ul>
<li class="chapter" data-level="8.1" data-path="vector-arithmetics.html"><a href="vector-arithmetics.html#rescaling-a-vector"><i class="fa fa-check"></i><b>8.1</b> Rescaling a vector</a></li>
<li class="chapter" data-level="8.2" data-path="vector-arithmetics.html"><a href="vector-arithmetics.html#two-vectors"><i class="fa fa-check"></i><b>8.2</b> Two vectors</a></li>
<li class="chapter" data-level="8.3" data-path="vector-arithmetics.html"><a href="vector-arithmetics.html#exercises-3"><i class="fa fa-check"></i><b>8.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="indexing.html"><a href="indexing.html"><i class="fa fa-check"></i><b>9</b> Indexing</a><ul>
<li class="chapter" data-level="9.1" data-path="indexing.html"><a href="indexing.html#subsetting-with-logicals"><i class="fa fa-check"></i><b>9.1</b> Subsetting with logicals</a></li>
<li class="chapter" data-level="9.2" data-path="indexing.html"><a href="indexing.html#logical-operators"><i class="fa fa-check"></i><b>9.2</b> Logical operators</a></li>
<li class="chapter" data-level="9.3" data-path="indexing.html"><a href="indexing.html#which"><i class="fa fa-check"></i><b>9.3</b> <code>which</code></a></li>
<li class="chapter" data-level="9.4" data-path="indexing.html"><a href="indexing.html#match"><i class="fa fa-check"></i><b>9.4</b> <code>match</code></a></li>
<li class="chapter" data-level="9.5" data-path="indexing.html"><a href="indexing.html#in"><i class="fa fa-check"></i><b>9.5</b> <code>%in%</code></a></li>
<li class="chapter" data-level="9.6" data-path="indexing.html"><a href="indexing.html#exercises-4"><i class="fa fa-check"></i><b>9.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html"><i class="fa fa-check"></i><b>10</b> Basic data wrangling</a><ul>
<li class="chapter" data-level="10.1" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html#adding-a-column-with-mutate"><i class="fa fa-check"></i><b>10.1</b> Adding a column with <code>mutate</code></a></li>
<li class="chapter" data-level="10.2" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html#subsetting-with-filter"><i class="fa fa-check"></i><b>10.2</b> Subsetting with <code>filter</code></a></li>
<li class="chapter" data-level="10.3" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html#selecting-columns-with-select"><i class="fa fa-check"></i><b>10.3</b> Selecting columns with <code>select</code></a></li>
<li class="chapter" data-level="10.4" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html#the-pipe"><i class="fa fa-check"></i><b>10.4</b> The pipe: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="10.5" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html#creating-a-data-frame"><i class="fa fa-check"></i><b>10.5</b> Creating a data frame</a></li>
<li class="chapter" data-level="10.6" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html#exercises-5"><i class="fa fa-check"></i><b>10.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="basic-plots.html"><a href="basic-plots.html"><i class="fa fa-check"></i><b>11</b> Basic plots</a><ul>
<li class="chapter" data-level="11.1" data-path="basic-plots.html"><a href="basic-plots.html#scatterplots"><i class="fa fa-check"></i><b>11.1</b> Scatterplots</a></li>
<li class="chapter" data-level="11.2" data-path="basic-plots.html"><a href="basic-plots.html#histograms"><i class="fa fa-check"></i><b>11.2</b> Histograms</a></li>
<li class="chapter" data-level="11.3" data-path="basic-plots.html"><a href="basic-plots.html#boxplot"><i class="fa fa-check"></i><b>11.3</b> Boxplot</a></li>
<li class="chapter" data-level="11.4" data-path="basic-plots.html"><a href="basic-plots.html#exercises-6"><i class="fa fa-check"></i><b>11.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>12</b> Importing data</a><ul>
<li class="chapter" data-level="12.1" data-path="importing-data.html"><a href="importing-data.html#paths-and-the-working-directory"><i class="fa fa-check"></i><b>12.1</b> Paths and the working directory</a></li>
<li class="chapter" data-level="12.2" data-path="importing-data.html"><a href="importing-data.html#read.csv"><i class="fa fa-check"></i><b>12.2</b> <code>read.csv</code></a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="programming-basics.html"><a href="programming-basics.html"><i class="fa fa-check"></i><b>13</b> Programming basics</a><ul>
<li class="chapter" data-level="13.1" data-path="programming-basics.html"><a href="programming-basics.html#conditional-expressions"><i class="fa fa-check"></i><b>13.1</b> Conditional expressions</a></li>
<li class="chapter" data-level="13.2" data-path="programming-basics.html"><a href="programming-basics.html#defining-functions"><i class="fa fa-check"></i><b>13.2</b> Defining functions</a></li>
<li class="chapter" data-level="13.3" data-path="programming-basics.html"><a href="programming-basics.html#namespaces"><i class="fa fa-check"></i><b>13.3</b> Namespaces</a></li>
<li class="chapter" data-level="13.4" data-path="programming-basics.html"><a href="programming-basics.html#for-loops"><i class="fa fa-check"></i><b>13.4</b> For-loops</a></li>
<li class="chapter" data-level="13.5" data-path="programming-basics.html"><a href="programming-basics.html#vectorization-and-functionals"><i class="fa fa-check"></i><b>13.5</b> Vectorization and functionals</a></li>
<li class="chapter" data-level="13.6" data-path="programming-basics.html"><a href="programming-basics.html#map"><i class="fa fa-check"></i><b>13.6</b> map</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="exercises-7.html"><a href="exercises-7.html"><i class="fa fa-check"></i><b>14</b> Exercises</a></li>
<li class="part"><span><b>II Data Visualization</b></span></li>
<li class="chapter" data-level="15" data-path="introduction-to-data-visualization.html"><a href="introduction-to-data-visualization.html"><i class="fa fa-check"></i><b>15</b> Introduction to data visualization</a></li>
<li class="chapter" data-level="16" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i><b>16</b> Distributions</a><ul>
<li class="chapter" data-level="16.1" data-path="distributions.html"><a href="distributions.html#variable-types"><i class="fa fa-check"></i><b>16.1</b> Variable types</a></li>
<li class="chapter" data-level="16.2" data-path="distributions.html"><a href="distributions.html#case-study-student-heights"><i class="fa fa-check"></i><b>16.2</b> Case study: Student heights</a></li>
<li class="chapter" data-level="16.3" data-path="distributions.html"><a href="distributions.html#distribution-function"><i class="fa fa-check"></i><b>16.3</b> Distribution function</a></li>
<li class="chapter" data-level="16.4" data-path="distributions.html"><a href="distributions.html#cumulative-distribution-functions"><i class="fa fa-check"></i><b>16.4</b> Cumulative distribution functions</a></li>
<li class="chapter" data-level="16.5" data-path="distributions.html"><a href="distributions.html#histograms-1"><i class="fa fa-check"></i><b>16.5</b> Histograms</a></li>
<li class="chapter" data-level="16.6" data-path="distributions.html"><a href="distributions.html#smoothed-density"><i class="fa fa-check"></i><b>16.6</b> Smoothed density</a><ul>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#interpreting-the-y-axis"><i class="fa fa-check"></i>Interpreting the y-axis</a></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#densities-permit-stratification"><i class="fa fa-check"></i>Densities permit stratification</a></li>
</ul></li>
<li class="chapter" data-level="16.7" data-path="distributions.html"><a href="distributions.html#exercises-8"><i class="fa fa-check"></i><b>16.7</b> Exercises</a></li>
<li class="chapter" data-level="16.8" data-path="distributions.html"><a href="distributions.html#the-normal-distribution"><i class="fa fa-check"></i><b>16.8</b> The normal distribution</a></li>
<li class="chapter" data-level="16.9" data-path="distributions.html"><a href="distributions.html#standardized-units"><i class="fa fa-check"></i><b>16.9</b> Standardized units</a></li>
<li class="chapter" data-level="16.10" data-path="distributions.html"><a href="distributions.html#quantile-quantile-qq-plots"><i class="fa fa-check"></i><b>16.10</b> Quantile-quantile QQ plots</a></li>
<li class="chapter" data-level="16.11" data-path="distributions.html"><a href="distributions.html#percentiles"><i class="fa fa-check"></i><b>16.11</b> Percentiles</a></li>
<li class="chapter" data-level="16.12" data-path="distributions.html"><a href="distributions.html#case-study-student-heights-continued"><i class="fa fa-check"></i><b>16.12</b> Case study: Student heights (continued)</a></li>
<li class="chapter" data-level="16.13" data-path="distributions.html"><a href="distributions.html#boxplots"><i class="fa fa-check"></i><b>16.13</b> Boxplots</a></li>
<li class="chapter" data-level="16.14" data-path="distributions.html"><a href="distributions.html#case-study-student-heights-continued-1"><i class="fa fa-check"></i><b>16.14</b> Case study: Student heights (continued)</a></li>
<li class="chapter" data-level="16.15" data-path="distributions.html"><a href="distributions.html#exercises-9"><i class="fa fa-check"></i><b>16.15</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="robust-summaries.html"><a href="robust-summaries.html"><i class="fa fa-check"></i><b>17</b> Robust summaries</a><ul>
<li class="chapter" data-level="17.1" data-path="robust-summaries.html"><a href="robust-summaries.html#outliers"><i class="fa fa-check"></i><b>17.1</b> Outliers</a></li>
<li class="chapter" data-level="17.2" data-path="robust-summaries.html"><a href="robust-summaries.html#median"><i class="fa fa-check"></i><b>17.2</b> Median</a></li>
<li class="chapter" data-level="17.3" data-path="robust-summaries.html"><a href="robust-summaries.html#the-inter-quartile-range-iqr"><i class="fa fa-check"></i><b>17.3</b> The inter quartile range (IQR)</a></li>
<li class="chapter" data-level="17.4" data-path="robust-summaries.html"><a href="robust-summaries.html#tukeys-definition-of-an-outlier"><i class="fa fa-check"></i><b>17.4</b> Tukey’s definition of an outlier</a></li>
<li class="chapter" data-level="17.5" data-path="robust-summaries.html"><a href="robust-summaries.html#median-absolute-deviation"><i class="fa fa-check"></i><b>17.5</b> Median absolute deviation</a></li>
<li class="chapter" data-level="" data-path="robust-summaries.html"><a href="robust-summaries.html#exercises-10"><i class="fa fa-check"></i>Exercises</a></li>
<li class="chapter" data-level="17.6" data-path="robust-summaries.html"><a href="robust-summaries.html#case-study-self-reported-student-heights"><i class="fa fa-check"></i><b>17.6</b> Case study: Self-reported student heights</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html"><i class="fa fa-check"></i><b>18</b> Summarizing data with dplyr</a><ul>
<li class="chapter" data-level="18.1" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html#summarize"><i class="fa fa-check"></i><b>18.1</b> Summarize</a></li>
<li class="chapter" data-level="18.2" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html#the-dot-operator"><i class="fa fa-check"></i><b>18.2</b> The dot operator</a></li>
<li class="chapter" data-level="18.3" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html#group-then-summarize"><i class="fa fa-check"></i><b>18.3</b> Group then summarize</a></li>
<li class="chapter" data-level="18.4" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html#sorting-data-frames"><i class="fa fa-check"></i><b>18.4</b> Sorting data frames</a><ul>
<li class="chapter" data-level="" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html#nested-sorting"><i class="fa fa-check"></i>Nested sorting</a></li>
<li><a href="summarizing-data-with-dplyr.html#the-top-n">The top <span class="math inline">\(n\)</span></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html#exercises-11"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>19</b> ggplot2</a><ul>
<li class="chapter" data-level="19.1" data-path="ggplot2.html"><a href="ggplot2.html#the-cheat-sheet"><i class="fa fa-check"></i><b>19.1</b> The cheat sheet</a></li>
<li class="chapter" data-level="19.2" data-path="ggplot2.html"><a href="ggplot2.html#the-components-of-a-graph"><i class="fa fa-check"></i><b>19.2</b> The components of a graph</a></li>
<li class="chapter" data-level="19.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot-objects-a-blank-slate"><i class="fa fa-check"></i><b>19.3</b> <code>ggplot</code> objects: a blank slate</a></li>
<li class="chapter" data-level="19.4" data-path="ggplot2.html"><a href="ggplot2.html#geometries"><i class="fa fa-check"></i><b>19.4</b> Geometries</a></li>
<li class="chapter" data-level="19.5" data-path="ggplot2.html"><a href="ggplot2.html#aesthetic-mappings"><i class="fa fa-check"></i><b>19.5</b> Aesthetic mappings</a></li>
<li class="chapter" data-level="19.6" data-path="ggplot2.html"><a href="ggplot2.html#layers"><i class="fa fa-check"></i><b>19.6</b> Layers</a></li>
<li class="chapter" data-level="19.7" data-path="ggplot2.html"><a href="ggplot2.html#tinkering-with-arguments"><i class="fa fa-check"></i><b>19.7</b> Tinkering with arguments</a></li>
<li class="chapter" data-level="19.8" data-path="ggplot2.html"><a href="ggplot2.html#global-versus-local-aesthetic-mappings"><i class="fa fa-check"></i><b>19.8</b> Global versus local aesthetic mappings</a></li>
<li class="chapter" data-level="19.9" data-path="ggplot2.html"><a href="ggplot2.html#scales"><i class="fa fa-check"></i><b>19.9</b> Scales</a></li>
<li class="chapter" data-level="19.10" data-path="ggplot2.html"><a href="ggplot2.html#labels-and-titles"><i class="fa fa-check"></i><b>19.10</b> Labels and titles</a></li>
<li class="chapter" data-level="19.11" data-path="ggplot2.html"><a href="ggplot2.html#categories-as-colors"><i class="fa fa-check"></i><b>19.11</b> Categories as colors</a></li>
<li class="chapter" data-level="19.12" data-path="ggplot2.html"><a href="ggplot2.html#annotation-and-shapes"><i class="fa fa-check"></i><b>19.12</b> Annotation and shapes</a></li>
<li class="chapter" data-level="19.13" data-path="ggplot2.html"><a href="ggplot2.html#adjustments"><i class="fa fa-check"></i><b>19.13</b> Adjustments</a></li>
<li class="chapter" data-level="19.14" data-path="ggplot2.html"><a href="ggplot2.html#add-on-packages"><i class="fa fa-check"></i><b>19.14</b> Add-on packages</a></li>
<li class="chapter" data-level="19.15" data-path="ggplot2.html"><a href="ggplot2.html#putting-it-all-together"><i class="fa fa-check"></i><b>19.15</b> Putting it all together</a></li>
<li class="chapter" data-level="19.16" data-path="ggplot2.html"><a href="ggplot2.html#other-geometries"><i class="fa fa-check"></i><b>19.16</b> Other geometries</a><ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#histogram"><i class="fa fa-check"></i>Histogram</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#density"><i class="fa fa-check"></i>Density</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#qq-plots"><i class="fa fa-check"></i>QQ-plots</a></li>
</ul></li>
<li class="chapter" data-level="19.17" data-path="ggplot2.html"><a href="ggplot2.html#grids-of-plots"><i class="fa fa-check"></i><b>19.17</b> Grids of plots</a></li>
<li class="chapter" data-level="19.18" data-path="ggplot2.html"><a href="ggplot2.html#quick-plots-with-qplot"><i class="fa fa-check"></i><b>19.18</b> Quick plots with <code>qplot</code></a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#exercises-12"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html"><i class="fa fa-check"></i><b>20</b> Case study: Trends in world health and economics</a><ul>
<li class="chapter" data-level="20.1" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#example-1-life-expectancy-and-fertility-rates"><i class="fa fa-check"></i><b>20.1</b> Example 1: Life expectancy and fertility rates</a><ul>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#hans-roslings-quiz"><i class="fa fa-check"></i>Hans Rosling’s quiz</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#a-scatterplot"><i class="fa fa-check"></i>A scatterplot</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#faceting"><i class="fa fa-check"></i><b>20.2</b> Faceting</a><ul>
<li><a href="case-study-trends-in-world-health-and-economics.html#facet_wrap"><code>facet_wrap</code></a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#fixed-scales-for-better-comparisons"><i class="fa fa-check"></i><b>20.3</b> Fixed scales for better comparisons</a></li>
<li class="chapter" data-level="20.4" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#time-series-plots"><i class="fa fa-check"></i><b>20.4</b> Time series plots</a></li>
<li class="chapter" data-level="20.5" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#labels-for-legends"><i class="fa fa-check"></i><b>20.5</b> Labels for legends</a></li>
<li class="chapter" data-level="20.6" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#example-2-income-distribution"><i class="fa fa-check"></i><b>20.6</b> Example 2: Income distribution</a></li>
<li class="chapter" data-level="20.7" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#transformations"><i class="fa fa-check"></i><b>20.7</b> Transformations</a><ul>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#country-income-distribution"><i class="fa fa-check"></i>Country income distribution</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#which-base"><i class="fa fa-check"></i>Which base?</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#transform-the-values-or-the-scale"><i class="fa fa-check"></i>Transform the values or the scale?</a></li>
</ul></li>
<li class="chapter" data-level="20.8" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#modes"><i class="fa fa-check"></i><b>20.8</b> Modes</a></li>
<li class="chapter" data-level="20.9" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#stratify-and-boxplot"><i class="fa fa-check"></i><b>20.9</b> Stratify and boxplot</a><ul>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#do-not-order-alphabetically"><i class="fa fa-check"></i>Do not order alphabetically</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#show-the-data"><i class="fa fa-check"></i>Show the data</a></li>
</ul></li>
<li class="chapter" data-level="20.10" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#comparing-distributions"><i class="fa fa-check"></i><b>20.10</b> Comparing distributions</a><ul>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#density-plots"><i class="fa fa-check"></i>Density plots</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#accessing-computed-variables"><i class="fa fa-check"></i>Accessing computed variables</a></li>
<li class="chapter" data-level="20.10.1" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#case_when"><i class="fa fa-check"></i><b>20.10.1</b> ‘case_when’</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#weighted-densities"><i class="fa fa-check"></i>Weighted densities</a></li>
</ul></li>
<li class="chapter" data-level="20.11" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#ecological-fallacy"><i class="fa fa-check"></i><b>20.11</b> Ecological fallacy</a><ul>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#logistic-transformation"><i class="fa fa-check"></i>Logistic transformation</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#show-the-data-1"><i class="fa fa-check"></i>Show the data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html"><i class="fa fa-check"></i><b>21</b> Data visualization principles</a><ul>
<li class="chapter" data-level="21.1" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#encoding-data-using-visual-cues"><i class="fa fa-check"></i><b>21.1</b> Encoding data using visual cues</a></li>
<li class="chapter" data-level="21.2" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#know-when-to-include-0"><i class="fa fa-check"></i><b>21.2</b> Know when to include 0</a></li>
<li class="chapter" data-level="21.3" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#do-not-distort-quantities"><i class="fa fa-check"></i><b>21.3</b> Do not distort quantities</a></li>
<li class="chapter" data-level="21.4" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#order-by-a-meaningful-value"><i class="fa fa-check"></i><b>21.4</b> Order by a meaningful value</a></li>
<li class="chapter" data-level="21.5" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#show-the-data-2"><i class="fa fa-check"></i><b>21.5</b> Show the data</a></li>
<li class="chapter" data-level="21.6" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#ease-comparisons-use-common-axes"><i class="fa fa-check"></i><b>21.6</b> Ease comparisons: use common axes</a></li>
<li class="chapter" data-level="21.7" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#ease-comparisons-align-plots-vertically-to-see-horizontal-changes-and-horizontally-to-see-vertical-changes"><i class="fa fa-check"></i><b>21.7</b> Ease comparisons: align plots vertically to see horizontal changes and horizontally to see vertical changes</a></li>
<li class="chapter" data-level="21.8" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#consider-transformations"><i class="fa fa-check"></i><b>21.8</b> Consider transformations</a></li>
<li class="chapter" data-level="21.9" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#ease-comparisons-visual-cues-to-be-compared-should-be-adjacent"><i class="fa fa-check"></i><b>21.9</b> Ease comparisons: visual cues to be compared should be adjacent</a></li>
<li class="chapter" data-level="21.10" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#ease-comparison-use-color"><i class="fa fa-check"></i><b>21.10</b> Ease comparison: use color</a></li>
<li class="chapter" data-level="21.11" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#think-of-the-color-blind"><i class="fa fa-check"></i><b>21.11</b> Think of the color blind</a></li>
<li class="chapter" data-level="21.12" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#use-scatterplots-to-examine-the-relationship-between-two-variables"><i class="fa fa-check"></i><b>21.12</b> Use scatterplots to examine the relationship between two variables</a><ul>
<li class="chapter" data-level="21.12.1" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#slope-charts"><i class="fa fa-check"></i><b>21.12.1</b> Slope charts</a></li>
<li class="chapter" data-level="21.12.2" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#bland-altman-plot"><i class="fa fa-check"></i><b>21.12.2</b> Bland-Altman plot</a></li>
</ul></li>
<li class="chapter" data-level="21.13" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#encoding-a-third-variable"><i class="fa fa-check"></i><b>21.13</b> Encoding a third variable</a></li>
<li class="chapter" data-level="21.14" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#avoid-pseudo-three-dimensional-plots"><i class="fa fa-check"></i><b>21.14</b> Avoid pseudo three dimensional plots</a></li>
<li class="chapter" data-level="21.15" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#avoid-gratuitous-three-dimensional-plots"><i class="fa fa-check"></i><b>21.15</b> Avoid gratuitous three dimensional plots</a></li>
<li class="chapter" data-level="21.16" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#avoid-too-many-significant-digits"><i class="fa fa-check"></i><b>21.16</b> Avoid too many significant digits</a></li>
<li class="chapter" data-level="21.17" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#know-your-audience"><i class="fa fa-check"></i><b>21.17</b> Know your audience</a></li>
<li class="chapter" data-level="21.18" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#exercises-13"><i class="fa fa-check"></i><b>21.18</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="case-study-the-impact-of-vaccines-on-battling-infectious-diseases.html"><a href="case-study-the-impact-of-vaccines-on-battling-infectious-diseases.html"><i class="fa fa-check"></i><b>22</b> Case study: The impact of vaccines on battling infectious diseases</a><ul>
<li class="chapter" data-level="" data-path="case-study-the-impact-of-vaccines-on-battling-infectious-diseases.html"><a href="case-study-the-impact-of-vaccines-on-battling-infectious-diseases.html#exercises-14"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="part"><span><b>III Probability</b></span></li>
<li class="chapter" data-level="23" data-path="discrete-probability.html"><a href="discrete-probability.html"><i class="fa fa-check"></i><b>23</b> Discrete probability</a><ul>
<li class="chapter" data-level="23.1" data-path="discrete-probability.html"><a href="discrete-probability.html#relative-frequency"><i class="fa fa-check"></i><b>23.1</b> Relative frequency</a></li>
<li class="chapter" data-level="23.2" data-path="discrete-probability.html"><a href="discrete-probability.html#notation"><i class="fa fa-check"></i><b>23.2</b> Notation</a></li>
<li class="chapter" data-level="23.3" data-path="discrete-probability.html"><a href="discrete-probability.html#monte-carlo-simulations"><i class="fa fa-check"></i><b>23.3</b> Monte Carlo simulations</a></li>
<li class="chapter" data-level="23.4" data-path="discrete-probability.html"><a href="discrete-probability.html#setting-the-random-seed"><i class="fa fa-check"></i><b>23.4</b> Setting the random seed</a><ul>
<li class="chapter" data-level="" data-path="discrete-probability.html"><a href="discrete-probability.html#with-and-without-replacement"><i class="fa fa-check"></i>With and without replacement</a></li>
</ul></li>
<li class="chapter" data-level="23.5" data-path="discrete-probability.html"><a href="discrete-probability.html#probability-distributions"><i class="fa fa-check"></i><b>23.5</b> Probability distributions</a></li>
<li class="chapter" data-level="23.6" data-path="discrete-probability.html"><a href="discrete-probability.html#independence"><i class="fa fa-check"></i><b>23.6</b> Independence</a></li>
<li class="chapter" data-level="23.7" data-path="discrete-probability.html"><a href="discrete-probability.html#conditional-probabilities"><i class="fa fa-check"></i><b>23.7</b> Conditional probabilities</a></li>
<li class="chapter" data-level="23.8" data-path="discrete-probability.html"><a href="discrete-probability.html#multiplication-rule"><i class="fa fa-check"></i><b>23.8</b> Multiplication rule</a><ul>
<li class="chapter" data-level="" data-path="discrete-probability.html"><a href="discrete-probability.html#multiplication-rule-under-indepedence"><i class="fa fa-check"></i>Multiplication rule under indepedence</a></li>
</ul></li>
<li class="chapter" data-level="23.9" data-path="discrete-probability.html"><a href="discrete-probability.html#combinations-and-permutations"><i class="fa fa-check"></i><b>23.9</b> Combinations and permutations</a><ul>
<li class="chapter" data-level="" data-path="discrete-probability.html"><a href="discrete-probability.html#monte-carlo-example"><i class="fa fa-check"></i>Monte Carlo example</a></li>
</ul></li>
<li class="chapter" data-level="23.10" data-path="discrete-probability.html"><a href="discrete-probability.html#birthday-problem"><i class="fa fa-check"></i><b>23.10</b> Birthday problem</a></li>
<li class="chapter" data-level="23.11" data-path="discrete-probability.html"><a href="discrete-probability.html#how-many-monte-carlo-experiments-are-enough"><i class="fa fa-check"></i><b>23.11</b> How many Monte Carlo experiments are enough</a></li>
<li class="chapter" data-level="23.12" data-path="discrete-probability.html"><a href="discrete-probability.html#addition-rule"><i class="fa fa-check"></i><b>23.12</b> Addition rule</a></li>
<li class="chapter" data-level="23.13" data-path="discrete-probability.html"><a href="discrete-probability.html#monty-hall-problem"><i class="fa fa-check"></i><b>23.13</b> Monty Hall problem</a></li>
<li class="chapter" data-level="" data-path="discrete-probability.html"><a href="discrete-probability.html#exercises-15"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="continuous-probability.html"><a href="continuous-probability.html"><i class="fa fa-check"></i><b>24</b> Continuous probability</a><ul>
<li class="chapter" data-level="24.1" data-path="continuous-probability.html"><a href="continuous-probability.html#theoretical-distribution"><i class="fa fa-check"></i><b>24.1</b> Theoretical distribution</a></li>
<li class="chapter" data-level="24.2" data-path="continuous-probability.html"><a href="continuous-probability.html#approximations"><i class="fa fa-check"></i><b>24.2</b> Approximations</a></li>
<li class="chapter" data-level="24.3" data-path="continuous-probability.html"><a href="continuous-probability.html#the-probability-density"><i class="fa fa-check"></i><b>24.3</b> The probability density</a></li>
<li class="chapter" data-level="24.4" data-path="continuous-probability.html"><a href="continuous-probability.html#monte-carlo-simulations-1"><i class="fa fa-check"></i><b>24.4</b> Monte Carlo simulations</a></li>
<li class="chapter" data-level="24.5" data-path="continuous-probability.html"><a href="continuous-probability.html#other-continuous-distributions"><i class="fa fa-check"></i><b>24.5</b> Other continuous distributions</a></li>
<li class="chapter" data-level="" data-path="continuous-probability.html"><a href="continuous-probability.html#exercise-1"><i class="fa fa-check"></i>Exercise</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="random-variables.html"><a href="random-variables.html"><i class="fa fa-check"></i><b>25</b> Random variables</a><ul>
<li class="chapter" data-level="25.1" data-path="random-variables.html"><a href="random-variables.html#sampling-models"><i class="fa fa-check"></i><b>25.1</b> Sampling models</a></li>
<li class="chapter" data-level="25.2" data-path="random-variables.html"><a href="random-variables.html#the-probability-distribution-of-a-random-variable"><i class="fa fa-check"></i><b>25.2</b> The probability distribution of a random variable</a></li>
<li class="chapter" data-level="25.3" data-path="random-variables.html"><a href="random-variables.html#distributions-versus-probability-distributions"><i class="fa fa-check"></i><b>25.3</b> Distributions versus probability distributions</a></li>
<li class="chapter" data-level="25.4" data-path="random-variables.html"><a href="random-variables.html#notation-for-random-variables"><i class="fa fa-check"></i><b>25.4</b> Notation for random variables</a></li>
<li class="chapter" data-level="25.5" data-path="random-variables.html"><a href="random-variables.html#central-limit-theorem"><i class="fa fa-check"></i><b>25.5</b> Central Limit Theorem</a></li>
<li class="chapter" data-level="25.6" data-path="random-variables.html"><a href="random-variables.html#the-expected-value-and-standard-error"><i class="fa fa-check"></i><b>25.6</b> The expected value and standard error</a></li>
<li class="chapter" data-level="25.7" data-path="random-variables.html"><a href="random-variables.html#central-limit-theorem-approximation"><i class="fa fa-check"></i><b>25.7</b> Central Limit Theorem approximation</a></li>
<li class="chapter" data-level="25.8" data-path="random-variables.html"><a href="random-variables.html#statistical-properties-of-averages"><i class="fa fa-check"></i><b>25.8</b> Statistical properties of averages</a><ul>
<li><a href="random-variables.html#why-we-use-mu-and-sigma">Why we use <span class="math inline">\(\mu\)</span> and <span class="math inline">\(\sigma\)</span></a></li>
</ul></li>
<li class="chapter" data-level="25.9" data-path="random-variables.html"><a href="random-variables.html#law-of-large-numbers"><i class="fa fa-check"></i><b>25.9</b> Law of large numbers</a><ul>
<li class="chapter" data-level="25.9.1" data-path="random-variables.html"><a href="random-variables.html#misinterpreting-law-of-averages"><i class="fa fa-check"></i><b>25.9.1</b> Misinterpreting law of averages</a></li>
</ul></li>
<li class="chapter" data-level="25.10" data-path="random-variables.html"><a href="random-variables.html#how-large-is-large-in-clt"><i class="fa fa-check"></i><b>25.10</b> How large is large in CLT?</a></li>
<li class="chapter" data-level="25.11" data-path="random-variables.html"><a href="random-variables.html#population-sd-versus-the-sample-sd"><i class="fa fa-check"></i><b>25.11</b> Population SD versus the sample SD</a></li>
<li class="chapter" data-level="" data-path="random-variables.html"><a href="random-variables.html#exercises-16"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="case-study-the-big-short.html"><a href="case-study-the-big-short.html"><i class="fa fa-check"></i><b>26</b> Case study: The Big Short</a><ul>
<li class="chapter" data-level="26.1" data-path="case-study-the-big-short.html"><a href="case-study-the-big-short.html#interest-rates-explained-with-chance-model"><i class="fa fa-check"></i><b>26.1</b> Interest rates explained with chance model</a></li>
<li class="chapter" data-level="26.2" data-path="case-study-the-big-short.html"><a href="case-study-the-big-short.html#the-big-short"><i class="fa fa-check"></i><b>26.2</b> The Big Short</a></li>
<li class="chapter" data-level="" data-path="case-study-the-big-short.html"><a href="case-study-the-big-short.html#exercises-17"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="part"><span><b>IV Inference and modeling</b></span></li>
<li class="chapter" data-level="27" data-path="polls.html"><a href="polls.html"><i class="fa fa-check"></i><b>27</b> Polls</a><ul>
<li class="chapter" data-level="27.1" data-path="polls.html"><a href="polls.html#opinion-polls"><i class="fa fa-check"></i><b>27.1</b> Opinion polls</a></li>
<li class="chapter" data-level="27.2" data-path="polls.html"><a href="polls.html#the-sampling-model-for-polls"><i class="fa fa-check"></i><b>27.2</b> The sampling model for polls</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="populations-samples-parameters-and-estimates.html"><a href="populations-samples-parameters-and-estimates.html"><i class="fa fa-check"></i><b>28</b> Populations, samples, parameters and estimates</a><ul>
<li class="chapter" data-level="28.1" data-path="populations-samples-parameters-and-estimates.html"><a href="populations-samples-parameters-and-estimates.html#the-sample-average"><i class="fa fa-check"></i><b>28.1</b> The sample average</a></li>
<li class="chapter" data-level="28.2" data-path="populations-samples-parameters-and-estimates.html"><a href="populations-samples-parameters-and-estimates.html#parameters"><i class="fa fa-check"></i><b>28.2</b> Parameters</a></li>
<li class="chapter" data-level="28.3" data-path="populations-samples-parameters-and-estimates.html"><a href="populations-samples-parameters-and-estimates.html#polling-versus-forecasting"><i class="fa fa-check"></i><b>28.3</b> Polling versus forecasting</a></li>
<li class="chapter" data-level="28.4" data-path="populations-samples-parameters-and-estimates.html"><a href="populations-samples-parameters-and-estimates.html#properties-of-our-estimate-expected-value-and-standard-error"><i class="fa fa-check"></i><b>28.4</b> Properties of our estimate: expected value and standard error</a></li>
<li class="chapter" data-level="" data-path="populations-samples-parameters-and-estimates.html"><a href="populations-samples-parameters-and-estimates.html#exercises-18"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="central-limit-theorem-in-practice.html"><a href="central-limit-theorem-in-practice.html"><i class="fa fa-check"></i><b>29</b> Central Limit Theorem in practice</a><ul>
<li class="chapter" data-level="29.1" data-path="central-limit-theorem-in-practice.html"><a href="central-limit-theorem-in-practice.html#a-monte-carlo-simulation"><i class="fa fa-check"></i><b>29.1</b> A Monte Carlo simulation</a></li>
<li class="chapter" data-level="29.2" data-path="central-limit-theorem-in-practice.html"><a href="central-limit-theorem-in-practice.html#the-spread"><i class="fa fa-check"></i><b>29.2</b> The spread</a></li>
<li class="chapter" data-level="29.3" data-path="central-limit-theorem-in-practice.html"><a href="central-limit-theorem-in-practice.html#bias-why-not-run-a-very-large-poll"><i class="fa fa-check"></i><b>29.3</b> Bias: why not run a very large poll?</a></li>
<li class="chapter" data-level="" data-path="central-limit-theorem-in-practice.html"><a href="central-limit-theorem-in-practice.html#exercises-19"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="confidence-intervals.html"><a href="confidence-intervals.html"><i class="fa fa-check"></i><b>30</b> Confidence intervals</a><ul>
<li class="chapter" data-level="30.1" data-path="confidence-intervals.html"><a href="confidence-intervals.html#a-monte-carlo-simulation-1"><i class="fa fa-check"></i><b>30.1</b> A Monte Carlo simulation</a></li>
<li class="chapter" data-level="30.2" data-path="confidence-intervals.html"><a href="confidence-intervals.html#the-correct-language"><i class="fa fa-check"></i><b>30.2</b> The correct language</a></li>
<li class="chapter" data-level="30.3" data-path="confidence-intervals.html"><a href="confidence-intervals.html#power"><i class="fa fa-check"></i><b>30.3</b> Power</a></li>
<li class="chapter" data-level="30.4" data-path="confidence-intervals.html"><a href="confidence-intervals.html#p-values"><i class="fa fa-check"></i><b>30.4</b> p-values</a></li>
<li class="chapter" data-level="" data-path="confidence-intervals.html"><a href="confidence-intervals.html#exercises-20"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="statistical-models.html"><a href="statistical-models.html"><i class="fa fa-check"></i><b>31</b> Statistical models</a><ul>
<li class="chapter" data-level="31.1" data-path="statistical-models.html"><a href="statistical-models.html#poll-aggregators"><i class="fa fa-check"></i><b>31.1</b> Poll aggregators</a></li>
<li class="chapter" data-level="31.2" data-path="statistical-models.html"><a href="statistical-models.html#poll-data"><i class="fa fa-check"></i><b>31.2</b> Poll data</a></li>
<li class="chapter" data-level="31.3" data-path="statistical-models.html"><a href="statistical-models.html#pollster-bias"><i class="fa fa-check"></i><b>31.3</b> Pollster bias</a></li>
<li class="chapter" data-level="31.4" data-path="statistical-models.html"><a href="statistical-models.html#data-driven-model"><i class="fa fa-check"></i><b>31.4</b> Data driven model</a></li>
<li class="chapter" data-level="" data-path="statistical-models.html"><a href="statistical-models.html#exercises-21"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="32" data-path="bayesian-statistics.html"><a href="bayesian-statistics.html"><i class="fa fa-check"></i><b>32</b> Bayesian statistics</a><ul>
<li class="chapter" data-level="32.1" data-path="bayesian-statistics.html"><a href="bayesian-statistics.html#bayes-theorem"><i class="fa fa-check"></i><b>32.1</b> Bayes theorem</a></li>
<li class="chapter" data-level="32.2" data-path="bayesian-statistics.html"><a href="bayesian-statistics.html#bayes-theorem-simulation"><i class="fa fa-check"></i><b>32.2</b> Bayes Theorem simulation</a></li>
<li class="chapter" data-level="32.3" data-path="bayesian-statistics.html"><a href="bayesian-statistics.html#bayes-in-practice"><i class="fa fa-check"></i><b>32.3</b> Bayes in practice</a></li>
<li class="chapter" data-level="32.4" data-path="bayesian-statistics.html"><a href="bayesian-statistics.html#the-hierarchical-model"><i class="fa fa-check"></i><b>32.4</b> The hierarchical model</a></li>
<li class="chapter" data-level="" data-path="bayesian-statistics.html"><a href="bayesian-statistics.html#exercises-22"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="33" data-path="case-study-election-forecasting.html"><a href="case-study-election-forecasting.html"><i class="fa fa-check"></i><b>33</b> Case study: Election forecasting</a><ul>
<li class="chapter" data-level="33.1" data-path="case-study-election-forecasting.html"><a href="case-study-election-forecasting.html#bayesian-approach"><i class="fa fa-check"></i><b>33.1</b> Bayesian approach</a></li>
<li class="chapter" data-level="33.2" data-path="case-study-election-forecasting.html"><a href="case-study-election-forecasting.html#the-general-bias"><i class="fa fa-check"></i><b>33.2</b> The general bias</a></li>
<li class="chapter" data-level="33.3" data-path="case-study-election-forecasting.html"><a href="case-study-election-forecasting.html#mathematical-representations-of-models"><i class="fa fa-check"></i><b>33.3</b> Mathematical representations of models</a></li>
<li class="chapter" data-level="33.4" data-path="case-study-election-forecasting.html"><a href="case-study-election-forecasting.html#predicting-the-electoral-college"><i class="fa fa-check"></i><b>33.4</b> Predicting the electoral college</a></li>
<li class="chapter" data-level="33.5" data-path="case-study-election-forecasting.html"><a href="case-study-election-forecasting.html#forecasting"><i class="fa fa-check"></i><b>33.5</b> Forecasting</a></li>
<li class="chapter" data-level="" data-path="case-study-election-forecasting.html"><a href="case-study-election-forecasting.html#exercise-2"><i class="fa fa-check"></i>Exercise</a></li>
<li class="chapter" data-level="" data-path="case-study-election-forecasting.html"><a href="case-study-election-forecasting.html#exercises-23"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="association-tests.html"><a href="association-tests.html"><i class="fa fa-check"></i><b>34</b> Association Tests</a><ul>
<li class="chapter" data-level="34.1" data-path="association-tests.html"><a href="association-tests.html#lady-tasting-tea"><i class="fa fa-check"></i><b>34.1</b> Lady Tasting Tea</a></li>
<li class="chapter" data-level="34.2" data-path="association-tests.html"><a href="association-tests.html#two-by-two-tables"><i class="fa fa-check"></i><b>34.2</b> Two-by-two tables</a></li>
<li class="chapter" data-level="34.3" data-path="association-tests.html"><a href="association-tests.html#chi-square-test"><i class="fa fa-check"></i><b>34.3</b> Chi-square Test</a></li>
<li class="chapter" data-level="34.4" data-path="association-tests.html"><a href="association-tests.html#the-odds-ratio"><i class="fa fa-check"></i><b>34.4</b> The Odds Ratio</a></li>
<li class="chapter" data-level="34.5" data-path="association-tests.html"><a href="association-tests.html#large-samples-small-p-values"><i class="fa fa-check"></i><b>34.5</b> Large samples, small p-values</a></li>
<li class="chapter" data-level="34.6" data-path="association-tests.html"><a href="association-tests.html#confidence-intervals-for-the-odds-ratio"><i class="fa fa-check"></i><b>34.6</b> Confidence intervals for the odds ratio</a></li>
<li class="chapter" data-level="" data-path="association-tests.html"><a href="association-tests.html#exercises-24"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="part"><span><b>V Data Wrangling</b></span></li>
<li class="chapter" data-level="35" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>35</b> Tidy data</a><ul>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercises-25"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="36" data-path="reshaping-data.html"><a href="reshaping-data.html"><i class="fa fa-check"></i><b>36</b> Reshaping data</a><ul>
<li class="chapter" data-level="36.1" data-path="reshaping-data.html"><a href="reshaping-data.html#gather"><i class="fa fa-check"></i><b>36.1</b> <code>gather</code></a></li>
<li class="chapter" data-level="36.2" data-path="reshaping-data.html"><a href="reshaping-data.html#spread"><i class="fa fa-check"></i><b>36.2</b> <code>spread</code></a></li>
<li class="chapter" data-level="36.3" data-path="reshaping-data.html"><a href="reshaping-data.html#separate"><i class="fa fa-check"></i><b>36.3</b> <code>separate</code></a></li>
<li class="chapter" data-level="36.4" data-path="reshaping-data.html"><a href="reshaping-data.html#unite"><i class="fa fa-check"></i><b>36.4</b> <code>unite</code></a></li>
<li class="chapter" data-level="" data-path="reshaping-data.html"><a href="reshaping-data.html#exercises-26"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="37" data-path="combining-tables.html"><a href="combining-tables.html"><i class="fa fa-check"></i><b>37</b> Combining tables</a><ul>
<li class="chapter" data-level="37.1" data-path="combining-tables.html"><a href="combining-tables.html#joins"><i class="fa fa-check"></i><b>37.1</b> Joins</a><ul>
<li class="chapter" data-level="37.1.1" data-path="combining-tables.html"><a href="combining-tables.html#left-join"><i class="fa fa-check"></i><b>37.1.1</b> Left join</a></li>
<li class="chapter" data-level="37.1.2" data-path="combining-tables.html"><a href="combining-tables.html#right-join"><i class="fa fa-check"></i><b>37.1.2</b> Right join</a></li>
<li class="chapter" data-level="37.1.3" data-path="combining-tables.html"><a href="combining-tables.html#inner-join"><i class="fa fa-check"></i><b>37.1.3</b> Inner join</a></li>
<li class="chapter" data-level="37.1.4" data-path="combining-tables.html"><a href="combining-tables.html#full-join"><i class="fa fa-check"></i><b>37.1.4</b> Full join</a></li>
<li class="chapter" data-level="37.1.5" data-path="combining-tables.html"><a href="combining-tables.html#semi-join"><i class="fa fa-check"></i><b>37.1.5</b> Semi join</a></li>
<li class="chapter" data-level="37.1.6" data-path="combining-tables.html"><a href="combining-tables.html#anti-join"><i class="fa fa-check"></i><b>37.1.6</b> Anti join</a></li>
</ul></li>
<li class="chapter" data-level="37.2" data-path="combining-tables.html"><a href="combining-tables.html#binding"><i class="fa fa-check"></i><b>37.2</b> Binding</a><ul>
<li class="chapter" data-level="37.2.1" data-path="combining-tables.html"><a href="combining-tables.html#binding-columns"><i class="fa fa-check"></i><b>37.2.1</b> Binding columns</a></li>
<li class="chapter" data-level="37.2.2" data-path="combining-tables.html"><a href="combining-tables.html#binding-by-rows"><i class="fa fa-check"></i><b>37.2.2</b> Binding by rows</a></li>
</ul></li>
<li class="chapter" data-level="37.3" data-path="combining-tables.html"><a href="combining-tables.html#set-operators"><i class="fa fa-check"></i><b>37.3</b> Set operators</a><ul>
<li class="chapter" data-level="37.3.1" data-path="combining-tables.html"><a href="combining-tables.html#intersect"><i class="fa fa-check"></i><b>37.3.1</b> Intersect</a></li>
<li class="chapter" data-level="37.3.2" data-path="combining-tables.html"><a href="combining-tables.html#union"><i class="fa fa-check"></i><b>37.3.2</b> Union</a></li>
<li class="chapter" data-level="37.3.3" data-path="combining-tables.html"><a href="combining-tables.html#setdiff"><i class="fa fa-check"></i><b>37.3.3</b> <code>setdiff</code></a></li>
<li class="chapter" data-level="37.3.4" data-path="combining-tables.html"><a href="combining-tables.html#setequal"><i class="fa fa-check"></i><b>37.3.4</b> <code>setequal</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="combining-tables.html"><a href="combining-tables.html#exercises-27"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="38" data-path="data-import.html"><a href="data-import.html"><i class="fa fa-check"></i><b>38</b> Data import</a><ul>
<li class="chapter" data-level="38.1" data-path="data-import.html"><a href="data-import.html#text-versus-binary-files"><i class="fa fa-check"></i><b>38.1</b> Text versus binary files</a></li>
<li class="chapter" data-level="38.2" data-path="data-import.html"><a href="data-import.html#unicode-versus-ascii"><i class="fa fa-check"></i><b>38.2</b> Unicode versus ASCII</a></li>
<li class="chapter" data-level="38.3" data-path="data-import.html"><a href="data-import.html#importing-spreadsheets"><i class="fa fa-check"></i><b>38.3</b> Importing spreadsheets</a></li>
<li class="chapter" data-level="38.4" data-path="data-import.html"><a href="data-import.html#paths-and-the-working-directory-1"><i class="fa fa-check"></i><b>38.4</b> Paths and the Working Directory</a></li>
<li class="chapter" data-level="38.5" data-path="data-import.html"><a href="data-import.html#the-readr-and-readxl-packages"><i class="fa fa-check"></i><b>38.5</b> The readr and readxl packages</a></li>
<li class="chapter" data-level="38.6" data-path="data-import.html"><a href="data-import.html#r-base-functions"><i class="fa fa-check"></i><b>38.6</b> R-base functions</a><ul>
<li class="chapter" data-level="38.6.1" data-path="data-import.html"><a href="data-import.html#downloading-files"><i class="fa fa-check"></i><b>38.6.1</b> Downloading files</a></li>
</ul></li>
<li class="chapter" data-level="38.7" data-path="data-import.html"><a href="data-import.html#nuances"><i class="fa fa-check"></i><b>38.7</b> Nuances</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercises-28"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="39" data-path="web-scraping.html"><a href="web-scraping.html"><i class="fa fa-check"></i><b>39</b> Web Scraping</a><ul>
<li class="chapter" data-level="39.1" data-path="web-scraping.html"><a href="web-scraping.html#html"><i class="fa fa-check"></i><b>39.1</b> HTML</a></li>
<li class="chapter" data-level="39.2" data-path="web-scraping.html"><a href="web-scraping.html#the-rvest-package"><i class="fa fa-check"></i><b>39.2</b> The rvest package</a></li>
<li class="chapter" data-level="39.3" data-path="web-scraping.html"><a href="web-scraping.html#css-selectors"><i class="fa fa-check"></i><b>39.3</b> CSS selectors</a></li>
<li class="chapter" data-level="39.4" data-path="web-scraping.html"><a href="web-scraping.html#json"><i class="fa fa-check"></i><b>39.4</b> JSON</a></li>
<li class="chapter" data-level="" data-path="web-scraping.html"><a href="web-scraping.html#exercises-29"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="40" data-path="string-processing.html"><a href="string-processing.html"><i class="fa fa-check"></i><b>40</b> String Processing</a><ul>
<li class="chapter" data-level="40.1" data-path="string-processing.html"><a href="string-processing.html#defining-strings-single-and-double-quotes-and-how-to-escape"><i class="fa fa-check"></i><b>40.1</b> Defining strings: single and double quotes and how to escape</a></li>
<li class="chapter" data-level="40.2" data-path="string-processing.html"><a href="string-processing.html#the-stringr-package"><i class="fa fa-check"></i><b>40.2</b> The stringr package</a><ul>
<li class="chapter" data-level="40.2.1" data-path="string-processing.html"><a href="string-processing.html#the-str_-functions"><i class="fa fa-check"></i><b>40.2.1</b> The <code>str_</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="40.3" data-path="string-processing.html"><a href="string-processing.html#case-study-1-us-murders-data"><i class="fa fa-check"></i><b>40.3</b> Case study 1: US murders data</a></li>
<li class="chapter" data-level="40.4" data-path="string-processing.html"><a href="string-processing.html#case-study-2-reported-heights"><i class="fa fa-check"></i><b>40.4</b> Case study 2: Reported heights</a></li>
<li class="chapter" data-level="40.5" data-path="string-processing.html"><a href="string-processing.html#regular-expressions"><i class="fa fa-check"></i><b>40.5</b> Regular expressions</a><ul>
<li class="chapter" data-level="40.5.1" data-path="string-processing.html"><a href="string-processing.html#a-string"><i class="fa fa-check"></i><b>40.5.1</b> A string</a></li>
<li class="chapter" data-level="40.5.2" data-path="string-processing.html"><a href="string-processing.html#special-characters"><i class="fa fa-check"></i><b>40.5.2</b> Special characters</a></li>
<li class="chapter" data-level="40.5.3" data-path="string-processing.html"><a href="string-processing.html#testing"><i class="fa fa-check"></i><b>40.5.3</b> Testing</a></li>
<li class="chapter" data-level="40.5.4" data-path="string-processing.html"><a href="string-processing.html#character-classes"><i class="fa fa-check"></i><b>40.5.4</b> Character classes</a></li>
<li class="chapter" data-level="40.5.5" data-path="string-processing.html"><a href="string-processing.html#anchors"><i class="fa fa-check"></i><b>40.5.5</b> Anchors</a></li>
<li class="chapter" data-level="40.5.6" data-path="string-processing.html"><a href="string-processing.html#quantifiers"><i class="fa fa-check"></i><b>40.5.6</b> Quantifiers</a></li>
<li class="chapter" data-level="40.5.7" data-path="string-processing.html"><a href="string-processing.html#not"><i class="fa fa-check"></i><b>40.5.7</b> Not</a></li>
<li class="chapter" data-level="40.5.8" data-path="string-processing.html"><a href="string-processing.html#search-and-replace-with-regex"><i class="fa fa-check"></i><b>40.5.8</b> Search and replace with regex</a></li>
<li class="chapter" data-level="40.5.9" data-path="string-processing.html"><a href="string-processing.html#white-space-s"><i class="fa fa-check"></i><b>40.5.9</b> White space <code>\s</code></a></li>
<li class="chapter" data-level="40.5.10" data-path="string-processing.html"><a href="string-processing.html#quantifiers-1"><i class="fa fa-check"></i><b>40.5.10</b> Quantifiers: <code>*</code>, <code>?</code>, <code>+</code></a></li>
<li class="chapter" data-level="40.5.11" data-path="string-processing.html"><a href="string-processing.html#groups"><i class="fa fa-check"></i><b>40.5.11</b> Groups</a></li>
<li class="chapter" data-level="40.5.12" data-path="string-processing.html"><a href="string-processing.html#search-and-replace-using-groups"><i class="fa fa-check"></i><b>40.5.12</b> Search and replace using groups</a></li>
<li class="chapter" data-level="40.5.13" data-path="string-processing.html"><a href="string-processing.html#testing-and-improving"><i class="fa fa-check"></i><b>40.5.13</b> Testing and improving</a></li>
<li class="chapter" data-level="40.5.14" data-path="string-processing.html"><a href="string-processing.html#using-groups-and-quantifiers"><i class="fa fa-check"></i><b>40.5.14</b> Using groups and quantifiers</a></li>
</ul></li>
<li class="chapter" data-level="40.6" data-path="string-processing.html"><a href="string-processing.html#stringr-package-continued"><i class="fa fa-check"></i><b>40.6</b> Stringr package (continued)</a><ul>
<li class="chapter" data-level="40.6.1" data-path="string-processing.html"><a href="string-processing.html#trimming"><i class="fa fa-check"></i><b>40.6.1</b> Trimming</a></li>
<li class="chapter" data-level="40.6.2" data-path="string-processing.html"><a href="string-processing.html#to-uppercase-and-to-lowercase"><i class="fa fa-check"></i><b>40.6.2</b> To uppercase and to lowercase</a></li>
</ul></li>
<li class="chapter" data-level="40.7" data-path="string-processing.html"><a href="string-processing.html#case-study-2-reported-heights-continued"><i class="fa fa-check"></i><b>40.7</b> Case study 2: Reported heights (continued)</a></li>
<li class="chapter" data-level="40.8" data-path="string-processing.html"><a href="string-processing.html#separate-1"><i class="fa fa-check"></i><b>40.8</b> <code>separate</code></a></li>
<li class="chapter" data-level="40.9" data-path="string-processing.html"><a href="string-processing.html#case-study-2-reported-heights-continued-1"><i class="fa fa-check"></i><b>40.9</b> Case study 2: Reported heights (continued)</a></li>
<li class="chapter" data-level="40.10" data-path="string-processing.html"><a href="string-processing.html#string-splitting"><i class="fa fa-check"></i><b>40.10</b> String splitting</a></li>
<li class="chapter" data-level="40.11" data-path="string-processing.html"><a href="string-processing.html#case-study-3-extracting-tables-from-a-pdf"><i class="fa fa-check"></i><b>40.11</b> Case study 3: Extracting tables from a PDF</a></li>
<li class="chapter" data-level="40.12" data-path="string-processing.html"><a href="string-processing.html#re-coding"><i class="fa fa-check"></i><b>40.12</b> Re-coding</a></li>
<li class="chapter" data-level="" data-path="string-processing.html"><a href="string-processing.html#exercises-30"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="41" data-path="parsing-dates-and-times.html"><a href="parsing-dates-and-times.html"><i class="fa fa-check"></i><b>41</b> Parsing Dates and Times</a><ul>
<li class="chapter" data-level="41.1" data-path="parsing-dates-and-times.html"><a href="parsing-dates-and-times.html#the-date-data-type"><i class="fa fa-check"></i><b>41.1</b> The date data type</a></li>
<li class="chapter" data-level="41.2" data-path="parsing-dates-and-times.html"><a href="parsing-dates-and-times.html#the-lubridate-package"><i class="fa fa-check"></i><b>41.2</b> The lubridate package</a></li>
<li class="chapter" data-level="" data-path="parsing-dates-and-times.html"><a href="parsing-dates-and-times.html#exercises-31"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="42" data-path="text-mining.html"><a href="text-mining.html"><i class="fa fa-check"></i><b>42</b> Text mining</a><ul>
<li class="chapter" data-level="42.1" data-path="text-mining.html"><a href="text-mining.html#case-study-trump-tweets"><i class="fa fa-check"></i><b>42.1</b> Case study: Trump tweets</a></li>
<li class="chapter" data-level="42.2" data-path="text-mining.html"><a href="text-mining.html#text-as-data"><i class="fa fa-check"></i><b>42.2</b> Text as data</a></li>
<li class="chapter" data-level="42.3" data-path="text-mining.html"><a href="text-mining.html#sentiment-analysis"><i class="fa fa-check"></i><b>42.3</b> Sentiment analysis</a></li>
<li class="chapter" data-level="" data-path="text-mining.html"><a href="text-mining.html#exercises-32"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="43" data-path="organizing-data-with-spreadsheets.html"><a href="organizing-data-with-spreadsheets.html"><i class="fa fa-check"></i><b>43</b> Organizing Data with Spreadsheets</a><ul>
<li class="chapter" data-level="" data-path="organizing-data-with-spreadsheets.html"><a href="organizing-data-with-spreadsheets.html#exercises-33"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="part"><span><b>VI Regression</b></span></li>
<li class="chapter" data-level="44" data-path="case-study-is-height-hereditary.html"><a href="case-study-is-height-hereditary.html"><i class="fa fa-check"></i><b>44</b> Case study: Is height hereditary?</a></li>
<li class="chapter" data-level="45" data-path="correlation-and-the-regression-line.html"><a href="correlation-and-the-regression-line.html"><i class="fa fa-check"></i><b>45</b> Correlation and the regression line</a><ul>
<li class="chapter" data-level="45.1" data-path="correlation-and-the-regression-line.html"><a href="correlation-and-the-regression-line.html#the-correlation-coefficient"><i class="fa fa-check"></i><b>45.1</b> The correlation coefficient</a></li>
<li class="chapter" data-level="45.2" data-path="correlation-and-the-regression-line.html"><a href="correlation-and-the-regression-line.html#sample-correlation-is-a-random-variable"><i class="fa fa-check"></i><b>45.2</b> Sample correlation is a random variable</a></li>
<li class="chapter" data-level="45.3" data-path="correlation-and-the-regression-line.html"><a href="correlation-and-the-regression-line.html#when-is-correlation-a-useful-summary"><i class="fa fa-check"></i><b>45.3</b> When is correlation a useful summary?</a></li>
<li class="chapter" data-level="45.4" data-path="correlation-and-the-regression-line.html"><a href="correlation-and-the-regression-line.html#prediction-based-on-stratification"><i class="fa fa-check"></i><b>45.4</b> Prediction based on stratification</a></li>
<li class="chapter" data-level="45.5" data-path="correlation-and-the-regression-line.html"><a href="correlation-and-the-regression-line.html#the-regression-line"><i class="fa fa-check"></i><b>45.5</b> The regression line</a></li>
<li class="chapter" data-level="45.6" data-path="correlation-and-the-regression-line.html"><a href="correlation-and-the-regression-line.html#regression-improves-precision"><i class="fa fa-check"></i><b>45.6</b> Regression improves precision</a></li>
<li class="chapter" data-level="45.7" data-path="correlation-and-the-regression-line.html"><a href="correlation-and-the-regression-line.html#bivariate-normal-distribution-advanced"><i class="fa fa-check"></i><b>45.7</b> Bivariate normal distribution (advanced)</a></li>
<li class="chapter" data-level="45.8" data-path="correlation-and-the-regression-line.html"><a href="correlation-and-the-regression-line.html#variance-explained"><i class="fa fa-check"></i><b>45.8</b> Variance explained</a></li>
<li class="chapter" data-level="45.9" data-path="correlation-and-the-regression-line.html"><a href="correlation-and-the-regression-line.html#warning-there-are-two-regression-lines"><i class="fa fa-check"></i><b>45.9</b> Warning: there are two regression lines</a></li>
<li class="chapter" data-level="" data-path="correlation-and-the-regression-line.html"><a href="correlation-and-the-regression-line.html#exercises-34"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="46" data-path="case-study-moneyball.html"><a href="case-study-moneyball.html"><i class="fa fa-check"></i><b>46</b> Case Study: Moneyball</a><ul>
<li class="chapter" data-level="46.1" data-path="case-study-moneyball.html"><a href="case-study-moneyball.html#sabermetics"><i class="fa fa-check"></i><b>46.1</b> Sabermetics</a></li>
<li class="chapter" data-level="46.2" data-path="case-study-moneyball.html"><a href="case-study-moneyball.html#baseball-basics"><i class="fa fa-check"></i><b>46.2</b> Baseball basics</a></li>
<li class="chapter" data-level="46.3" data-path="case-study-moneyball.html"><a href="case-study-moneyball.html#no-awards-for-bb"><i class="fa fa-check"></i><b>46.3</b> No awards for BB</a></li>
<li class="chapter" data-level="46.4" data-path="case-study-moneyball.html"><a href="case-study-moneyball.html#base-on-ball-or-stolen-bases"><i class="fa fa-check"></i><b>46.4</b> Base on Ball or Stolen Bases?</a></li>
<li class="chapter" data-level="46.5" data-path="case-study-moneyball.html"><a href="case-study-moneyball.html#regression-applied-to-baseball-statistics"><i class="fa fa-check"></i><b>46.5</b> Regression applied to baseball statistics</a></li>
</ul></li>
<li class="chapter" data-level="47" data-path="confounding.html"><a href="confounding.html"><i class="fa fa-check"></i><b>47</b> Confounding</a><ul>
<li class="chapter" data-level="47.1" data-path="confounding.html"><a href="confounding.html#understanding-confounding-through-stratification"><i class="fa fa-check"></i><b>47.1</b> Understanding confounding through stratification</a></li>
<li class="chapter" data-level="47.2" data-path="confounding.html"><a href="confounding.html#multivariate-regression"><i class="fa fa-check"></i><b>47.2</b> Multivariate regression</a></li>
</ul></li>
<li class="chapter" data-level="48" data-path="linear-models-and-least-squared-estimates.html"><a href="linear-models-and-least-squared-estimates.html"><i class="fa fa-check"></i><b>48</b> Linear Models and Least Squared Estimates</a><ul>
<li class="chapter" data-level="48.1" data-path="linear-models-and-least-squared-estimates.html"><a href="linear-models-and-least-squared-estimates.html#interpreting-linear-models"><i class="fa fa-check"></i><b>48.1</b> Interpreting linear models</a></li>
<li class="chapter" data-level="48.2" data-path="linear-models-and-least-squared-estimates.html"><a href="linear-models-and-least-squared-estimates.html#least-squares-estimates-lse"><i class="fa fa-check"></i><b>48.2</b> Least Squares Estimates (LSE)</a></li>
<li class="chapter" data-level="48.3" data-path="linear-models-and-least-squared-estimates.html"><a href="linear-models-and-least-squared-estimates.html#the-lm-function"><i class="fa fa-check"></i><b>48.3</b> The <code>lm</code> function</a></li>
<li class="chapter" data-level="48.4" data-path="linear-models-and-least-squared-estimates.html"><a href="linear-models-and-least-squared-estimates.html#lse-are-random-variables"><i class="fa fa-check"></i><b>48.4</b> LSE are random variables</a></li>
<li class="chapter" data-level="48.5" data-path="linear-models-and-least-squared-estimates.html"><a href="linear-models-and-least-squared-estimates.html#lse-are-correlated-advanced"><i class="fa fa-check"></i><b>48.5</b> LSE are correlated (advanced)</a></li>
<li class="chapter" data-level="48.6" data-path="linear-models-and-least-squared-estimates.html"><a href="linear-models-and-least-squared-estimates.html#predicted-values-are-random-variables"><i class="fa fa-check"></i><b>48.6</b> Predicted values are random variables</a></li>
<li class="chapter" data-level="" data-path="linear-models-and-least-squared-estimates.html"><a href="linear-models-and-least-squared-estimates.html#exercises-35"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="49" data-path="advanced-tidyverse-tibbles-and-do.html"><a href="advanced-tidyverse-tibbles-and-do.html"><i class="fa fa-check"></i><b>49</b> Advanced tidyverse: tibbles and <code>do</code></a><ul>
<li class="chapter" data-level="49.1" data-path="advanced-tidyverse-tibbles-and-do.html"><a href="advanced-tidyverse-tibbles-and-do.html#tibbles"><i class="fa fa-check"></i><b>49.1</b> Tibbles</a><ul>
<li class="chapter" data-level="49.1.1" data-path="advanced-tidyverse-tibbles-and-do.html"><a href="advanced-tidyverse-tibbles-and-do.html#tibbles-display-better"><i class="fa fa-check"></i><b>49.1.1</b> Tibbles display better</a></li>
<li class="chapter" data-level="49.1.2" data-path="advanced-tidyverse-tibbles-and-do.html"><a href="advanced-tidyverse-tibbles-and-do.html#subsets-of-tibbles-are-tibbles"><i class="fa fa-check"></i><b>49.1.2</b> Subsets of tibbles are tibbles</a></li>
<li class="chapter" data-level="49.1.3" data-path="advanced-tidyverse-tibbles-and-do.html"><a href="advanced-tidyverse-tibbles-and-do.html#tibbles-can-have-complex-entries"><i class="fa fa-check"></i><b>49.1.3</b> Tibbles can have complex entries</a></li>
<li class="chapter" data-level="49.1.4" data-path="advanced-tidyverse-tibbles-and-do.html"><a href="advanced-tidyverse-tibbles-and-do.html#tibbles-can-be-grouped"><i class="fa fa-check"></i><b>49.1.4</b> Tibbles can be grouped</a></li>
</ul></li>
<li class="chapter" data-level="49.2" data-path="advanced-tidyverse-tibbles-and-do.html"><a href="advanced-tidyverse-tibbles-and-do.html#do"><i class="fa fa-check"></i><b>49.2</b> <code>do</code></a></li>
</ul></li>
<li class="chapter" data-level="50" data-path="the-broom-package.html"><a href="the-broom-package.html"><i class="fa fa-check"></i><b>50</b> The broom package</a><ul>
<li class="chapter" data-level="" data-path="the-broom-package.html"><a href="the-broom-package.html#exercises-36"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="51" data-path="case-study-money-ball-continued.html"><a href="case-study-money-ball-continued.html"><i class="fa fa-check"></i><b>51</b> Case study: Money Ball continued</a><ul>
<li class="chapter" data-level="51.1" data-path="case-study-money-ball-continued.html"><a href="case-study-money-ball-continued.html#adding-salary-and-position-information"><i class="fa fa-check"></i><b>51.1</b> Adding salary and position information</a></li>
<li class="chapter" data-level="51.2" data-path="case-study-money-ball-continued.html"><a href="case-study-money-ball-continued.html#picking-9-players"><i class="fa fa-check"></i><b>51.2</b> Picking 9 players</a></li>
<li class="chapter" data-level="" data-path="case-study-money-ball-continued.html"><a href="case-study-money-ball-continued.html#exercises-37"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="52" data-path="regression-fallacy.html"><a href="regression-fallacy.html"><i class="fa fa-check"></i><b>52</b> Regression fallacy</a></li>
<li class="chapter" data-level="53" data-path="measurement-error-models.html"><a href="measurement-error-models.html"><i class="fa fa-check"></i><b>53</b> Measurement error models</a></li>
<li class="chapter" data-level="54" data-path="association-is-not-causation.html"><a href="association-is-not-causation.html"><i class="fa fa-check"></i><b>54</b> Association is not causation</a><ul>
<li class="chapter" data-level="54.1" data-path="association-is-not-causation.html"><a href="association-is-not-causation.html#spurious-correlation"><i class="fa fa-check"></i><b>54.1</b> Spurious correlation</a></li>
<li class="chapter" data-level="54.2" data-path="association-is-not-causation.html"><a href="association-is-not-causation.html#outliers-1"><i class="fa fa-check"></i><b>54.2</b> Outliers</a></li>
<li class="chapter" data-level="54.3" data-path="association-is-not-causation.html"><a href="association-is-not-causation.html#reversing-cause-and-effect"><i class="fa fa-check"></i><b>54.3</b> Reversing cause and effect</a></li>
<li class="chapter" data-level="54.4" data-path="association-is-not-causation.html"><a href="association-is-not-causation.html#confounders"><i class="fa fa-check"></i><b>54.4</b> Confounders</a><ul>
<li class="chapter" data-level="54.4.1" data-path="association-is-not-causation.html"><a href="association-is-not-causation.html#example-uc-berkeley-admissions"><i class="fa fa-check"></i><b>54.4.1</b> Example: UC Berkeley admissions</a></li>
<li class="chapter" data-level="54.4.2" data-path="association-is-not-causation.html"><a href="association-is-not-causation.html#confounding-explained-graphically"><i class="fa fa-check"></i><b>54.4.2</b> Confounding explained graphically</a></li>
<li class="chapter" data-level="54.4.3" data-path="association-is-not-causation.html"><a href="association-is-not-causation.html#average-after-stratifying"><i class="fa fa-check"></i><b>54.4.3</b> Average after stratifying</a></li>
</ul></li>
<li class="chapter" data-level="54.5" data-path="association-is-not-causation.html"><a href="association-is-not-causation.html#simpsons-paradox"><i class="fa fa-check"></i><b>54.5</b> Simpson’s Paradox</a></li>
<li class="chapter" data-level="" data-path="association-is-not-causation.html"><a href="association-is-not-causation.html#exercises-38"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="part"><span><b>VII Machine Learning</b></span></li>
<li class="chapter" data-level="55" data-path="introduction-to-machine-learning.html"><a href="introduction-to-machine-learning.html"><i class="fa fa-check"></i><b>55</b> Introduction to Machine Learning</a><ul>
<li class="chapter" data-level="55.1" data-path="introduction-to-machine-learning.html"><a href="introduction-to-machine-learning.html#notation-1"><i class="fa fa-check"></i><b>55.1</b> Notation</a></li>
<li class="chapter" data-level="55.2" data-path="introduction-to-machine-learning.html"><a href="introduction-to-machine-learning.html#categorical-versus-continuous"><i class="fa fa-check"></i><b>55.2</b> Categorical versus continuous</a></li>
<li class="chapter" data-level="55.3" data-path="introduction-to-machine-learning.html"><a href="introduction-to-machine-learning.html#an-example"><i class="fa fa-check"></i><b>55.3</b> An example</a></li>
<li class="chapter" data-level="" data-path="introduction-to-machine-learning.html"><a href="introduction-to-machine-learning.html#exercises-39"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="56" data-path="the-confusion-matrix-prevalence-sensitivity-and-specificity.html"><a href="the-confusion-matrix-prevalence-sensitivity-and-specificity.html"><i class="fa fa-check"></i><b>56</b> The confusion matrix, prevalence, sensitivity and specificity</a><ul>
<li class="chapter" data-level="56.1" data-path="the-confusion-matrix-prevalence-sensitivity-and-specificity.html"><a href="the-confusion-matrix-prevalence-sensitivity-and-specificity.html#training-and-test-sets"><i class="fa fa-check"></i><b>56.1</b> Training and test sets</a></li>
<li class="chapter" data-level="56.2" data-path="the-confusion-matrix-prevalence-sensitivity-and-specificity.html"><a href="the-confusion-matrix-prevalence-sensitivity-and-specificity.html#overall-accuracy"><i class="fa fa-check"></i><b>56.2</b> Overall accuracy</a></li>
<li class="chapter" data-level="56.3" data-path="the-confusion-matrix-prevalence-sensitivity-and-specificity.html"><a href="the-confusion-matrix-prevalence-sensitivity-and-specificity.html#the-confusion-matrix"><i class="fa fa-check"></i><b>56.3</b> The confusion matrix</a></li>
<li class="chapter" data-level="56.4" data-path="the-confusion-matrix-prevalence-sensitivity-and-specificity.html"><a href="the-confusion-matrix-prevalence-sensitivity-and-specificity.html#sensitivity-and-specificity"><i class="fa fa-check"></i><b>56.4</b> Sensitivity and specificity</a></li>
<li class="chapter" data-level="56.5" data-path="the-confusion-matrix-prevalence-sensitivity-and-specificity.html"><a href="the-confusion-matrix-prevalence-sensitivity-and-specificity.html#balanced-accuracy-and-f_1-score"><i class="fa fa-check"></i><b>56.5</b> Balanced accuracy and <span class="math inline">\(F_1\)</span> score</a></li>
<li class="chapter" data-level="56.6" data-path="the-confusion-matrix-prevalence-sensitivity-and-specificity.html"><a href="the-confusion-matrix-prevalence-sensitivity-and-specificity.html#prevalence-matters-in-practice"><i class="fa fa-check"></i><b>56.6</b> Prevalence matters in practice</a></li>
<li class="chapter" data-level="56.7" data-path="the-confusion-matrix-prevalence-sensitivity-and-specificity.html"><a href="the-confusion-matrix-prevalence-sensitivity-and-specificity.html#roc-and-precision-recall-curves"><i class="fa fa-check"></i><b>56.7</b> ROC and precision-recall curves</a></li>
<li class="chapter" data-level="" data-path="the-confusion-matrix-prevalence-sensitivity-and-specificity.html"><a href="the-confusion-matrix-prevalence-sensitivity-and-specificity.html#exercises-40"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="57" data-path="conditional-probabilities-and-expectations.html"><a href="conditional-probabilities-and-expectations.html"><i class="fa fa-check"></i><b>57</b> Conditional probabilities and expectations</a><ul>
<li class="chapter" data-level="57.1" data-path="conditional-probabilities-and-expectations.html"><a href="conditional-probabilities-and-expectations.html#conditional-probabilities-1"><i class="fa fa-check"></i><b>57.1</b> Conditional probabilities</a></li>
<li class="chapter" data-level="57.2" data-path="conditional-probabilities-and-expectations.html"><a href="conditional-probabilities-and-expectations.html#conditional-expectations"><i class="fa fa-check"></i><b>57.2</b> Conditional expectations</a></li>
<li class="chapter" data-level="57.3" data-path="conditional-probabilities-and-expectations.html"><a href="conditional-probabilities-and-expectations.html#the-loss-function"><i class="fa fa-check"></i><b>57.3</b> The loss function</a></li>
<li class="chapter" data-level="57.4" data-path="conditional-probabilities-and-expectations.html"><a href="conditional-probabilities-and-expectations.html#conditional-expectation-minimizes-squared-loss-function"><i class="fa fa-check"></i><b>57.4</b> Conditional expectation minimizes squared loss function</a></li>
<li class="chapter" data-level="" data-path="conditional-probabilities-and-expectations.html"><a href="conditional-probabilities-and-expectations.html#exercises-41"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="58" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>58</b> Logistic Regression</a><ul>
<li class="chapter" data-level="58.1" data-path="logistic-regression.html"><a href="logistic-regression.html#linear-regression-for-prediction"><i class="fa fa-check"></i><b>58.1</b> Linear regression for prediction</a></li>
<li class="chapter" data-level="58.2" data-path="logistic-regression.html"><a href="logistic-regression.html#the-predict-function"><i class="fa fa-check"></i><b>58.2</b> The <code>predict</code> function</a></li>
<li class="chapter" data-level="" data-path="logistic-regression.html"><a href="logistic-regression.html#exercises-42"><i class="fa fa-check"></i>Exercises</a></li>
<li class="chapter" data-level="58.3" data-path="logistic-regression.html"><a href="logistic-regression.html#logistic-regression-1"><i class="fa fa-check"></i><b>58.3</b> Logistic regression</a></li>
<li class="chapter" data-level="58.4" data-path="logistic-regression.html"><a href="logistic-regression.html#generalized-linear-models"><i class="fa fa-check"></i><b>58.4</b> Generalized Linear Models</a></li>
<li class="chapter" data-level="" data-path="logistic-regression.html"><a href="logistic-regression.html#exercises-43"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="59" data-path="case-study-is-it-a-2-or-a-7.html"><a href="case-study-is-it-a-2-or-a-7.html"><i class="fa fa-check"></i><b>59</b> Case study: is it a 2 or a 7?</a></li>
<li class="chapter" data-level="60" data-path="smoothing.html"><a href="smoothing.html"><i class="fa fa-check"></i><b>60</b> Smoothing</a><ul>
<li class="chapter" data-level="60.1" data-path="smoothing.html"><a href="smoothing.html#bin-smoothing"><i class="fa fa-check"></i><b>60.1</b> Bin smoothing</a></li>
<li class="chapter" data-level="60.2" data-path="smoothing.html"><a href="smoothing.html#kernels"><i class="fa fa-check"></i><b>60.2</b> Kernels</a></li>
<li class="chapter" data-level="60.3" data-path="smoothing.html"><a href="smoothing.html#local-weighted-regression-loess"><i class="fa fa-check"></i><b>60.3</b> Local weighted regression (loess)</a></li>
<li class="chapter" data-level="60.4" data-path="smoothing.html"><a href="smoothing.html#fitting-parabolas"><i class="fa fa-check"></i><b>60.4</b> Fitting parabolas</a></li>
<li class="chapter" data-level="60.5" data-path="smoothing.html"><a href="smoothing.html#beware-of-ggplot-defaults"><i class="fa fa-check"></i><b>60.5</b> Beware of <code>ggplot</code> defaults</a></li>
<li class="chapter" data-level="" data-path="smoothing.html"><a href="smoothing.html#exercises-44"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="61" data-path="matrix-algebra.html"><a href="matrix-algebra.html"><i class="fa fa-check"></i><b>61</b> Matrix algebra</a><ul>
<li class="chapter" data-level="61.1" data-path="matrix-algebra.html"><a href="matrix-algebra.html#notation-2"><i class="fa fa-check"></i><b>61.1</b> Notation</a></li>
<li class="chapter" data-level="61.2" data-path="matrix-algebra.html"><a href="matrix-algebra.html#matrix-operations"><i class="fa fa-check"></i><b>61.2</b> Matrix operations</a><ul>
<li class="chapter" data-level="61.2.1" data-path="matrix-algebra.html"><a href="matrix-algebra.html#converting-a-vector-to-a-matrix"><i class="fa fa-check"></i><b>61.2.1</b> Converting a vector to a matrix</a></li>
<li class="chapter" data-level="61.2.2" data-path="matrix-algebra.html"><a href="matrix-algebra.html#row-and-column-summaries"><i class="fa fa-check"></i><b>61.2.2</b> Row and column summaries</a></li>
<li class="chapter" data-level="61.2.3" data-path="matrix-algebra.html"><a href="matrix-algebra.html#apply"><i class="fa fa-check"></i><b>61.2.3</b> <code>apply</code></a></li>
<li class="chapter" data-level="61.2.4" data-path="matrix-algebra.html"><a href="matrix-algebra.html#filtering-columns-based-on-summaries"><i class="fa fa-check"></i><b>61.2.4</b> Filtering columns based on summaries</a></li>
<li class="chapter" data-level="61.2.5" data-path="matrix-algebra.html"><a href="matrix-algebra.html#indexing-with-matrices"><i class="fa fa-check"></i><b>61.2.5</b> Indexing with matrices</a></li>
<li class="chapter" data-level="61.2.6" data-path="matrix-algebra.html"><a href="matrix-algebra.html#binarizing-the-data"><i class="fa fa-check"></i><b>61.2.6</b> Binarizing the data</a></li>
<li class="chapter" data-level="61.2.7" data-path="matrix-algebra.html"><a href="matrix-algebra.html#vectorization-for-matrices"><i class="fa fa-check"></i><b>61.2.7</b> Vectorization for matrices</a></li>
</ul></li>
<li class="chapter" data-level="61.3" data-path="matrix-algebra.html"><a href="matrix-algebra.html#matrix-algebra-operations"><i class="fa fa-check"></i><b>61.3</b> Matrix algebra operations</a></li>
<li class="chapter" data-level="" data-path="matrix-algebra.html"><a href="matrix-algebra.html#exercises-45"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="62" data-path="distance.html"><a href="distance.html"><i class="fa fa-check"></i><b>62</b> Distance</a><ul>
<li class="chapter" data-level="62.1" data-path="distance.html"><a href="distance.html#euclidean-distance"><i class="fa fa-check"></i><b>62.1</b> Euclidean distance</a></li>
<li class="chapter" data-level="62.2" data-path="distance.html"><a href="distance.html#distance-in-higher-dimensions"><i class="fa fa-check"></i><b>62.2</b> Distance in higher dimensions</a></li>
<li class="chapter" data-level="62.3" data-path="distance.html"><a href="distance.html#example"><i class="fa fa-check"></i><b>62.3</b> Example</a></li>
<li class="chapter" data-level="62.4" data-path="distance.html"><a href="distance.html#distance-between-predictors"><i class="fa fa-check"></i><b>62.4</b> Distance between predictors</a></li>
<li class="chapter" data-level="" data-path="distance.html"><a href="distance.html#exercises-46"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="63" data-path="nearest-neighbors.html"><a href="nearest-neighbors.html"><i class="fa fa-check"></i><b>63</b> Nearest neighbors</a><ul>
<li class="chapter" data-level="63.1" data-path="nearest-neighbors.html"><a href="nearest-neighbors.html#over-training"><i class="fa fa-check"></i><b>63.1</b> Over training</a></li>
<li class="chapter" data-level="63.2" data-path="nearest-neighbors.html"><a href="nearest-neighbors.html#over-smoothing"><i class="fa fa-check"></i><b>63.2</b> Over-smoothing</a></li>
<li class="chapter" data-level="63.3" data-path="nearest-neighbors.html"><a href="nearest-neighbors.html#picking-the-k-in-knn"><i class="fa fa-check"></i><b>63.3</b> Picking the <span class="math inline">\(k\)</span> in kNN</a></li>
<li class="chapter" data-level="" data-path="nearest-neighbors.html"><a href="nearest-neighbors.html#exercises-47"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="64" data-path="the-caret-package.html"><a href="the-caret-package.html"><i class="fa fa-check"></i><b>64</b> The caret package</a><ul>
<li class="chapter" data-level="64.1" data-path="the-caret-package.html"><a href="the-caret-package.html#the-train-functon"><i class="fa fa-check"></i><b>64.1</b> The <code>train</code> functon</a></li>
<li class="chapter" data-level="64.2" data-path="the-caret-package.html"><a href="the-caret-package.html#cross-validation"><i class="fa fa-check"></i><b>64.2</b> Cross validation</a></li>
<li class="chapter" data-level="64.3" data-path="the-caret-package.html"><a href="the-caret-package.html#example-fitting-with-loess"><i class="fa fa-check"></i><b>64.3</b> Example: fitting with loess</a></li>
</ul></li>
<li class="chapter" data-level="65" data-path="cross-validation-1.html"><a href="cross-validation-1.html"><i class="fa fa-check"></i><b>65</b> Cross validation</a><ul>
<li class="chapter" data-level="65.1" data-path="cross-validation-1.html"><a href="cross-validation-1.html#k-fold-cross-validation"><i class="fa fa-check"></i><b>65.1</b> K-fold cross validation</a></li>
<li class="chapter" data-level="" data-path="cross-validation-1.html"><a href="cross-validation-1.html#exercises-48"><i class="fa fa-check"></i>Exercises</a></li>
<li class="chapter" data-level="65.2" data-path="cross-validation-1.html"><a href="cross-validation-1.html#bootstrap"><i class="fa fa-check"></i><b>65.2</b> Bootstrap</a></li>
<li class="chapter" data-level="" data-path="cross-validation-1.html"><a href="cross-validation-1.html#exercises-49"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="66" data-path="generative-models.html"><a href="generative-models.html"><i class="fa fa-check"></i><b>66</b> Generative models</a><ul>
<li class="chapter" data-level="66.1" data-path="generative-models.html"><a href="generative-models.html#naive-bayes"><i class="fa fa-check"></i><b>66.1</b> Naive Bayes</a></li>
<li class="chapter" data-level="66.2" data-path="generative-models.html"><a href="generative-models.html#controlling-prevalence"><i class="fa fa-check"></i><b>66.2</b> Controlling prevalence</a></li>
<li class="chapter" data-level="66.3" data-path="generative-models.html"><a href="generative-models.html#quadratic-discriminant-analysis"><i class="fa fa-check"></i><b>66.3</b> Quadratic Discriminant Analysis</a></li>
<li class="chapter" data-level="66.4" data-path="generative-models.html"><a href="generative-models.html#linear-discriminant-analysis"><i class="fa fa-check"></i><b>66.4</b> Linear discriminant analysis</a></li>
<li class="chapter" data-level="66.5" data-path="generative-models.html"><a href="generative-models.html#connection-distance"><i class="fa fa-check"></i><b>66.5</b> Connection distance</a></li>
<li class="chapter" data-level="66.6" data-path="generative-models.html"><a href="generative-models.html#case-study-more-than-three-classes"><i class="fa fa-check"></i><b>66.6</b> Case study: more than three classes</a></li>
<li class="chapter" data-level="" data-path="generative-models.html"><a href="generative-models.html#exercises-50"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="67" data-path="trees-and-random-forests.html"><a href="trees-and-random-forests.html"><i class="fa fa-check"></i><b>67</b> Trees and Random Forests</a><ul>
<li class="chapter" data-level="67.1" data-path="trees-and-random-forests.html"><a href="trees-and-random-forests.html#the-curse-of-dimensionality"><i class="fa fa-check"></i><b>67.1</b> The curse of dimensionality</a></li>
<li class="chapter" data-level="67.2" data-path="trees-and-random-forests.html"><a href="trees-and-random-forests.html#classification-and-regression-trees-cart"><i class="fa fa-check"></i><b>67.2</b> Classification and Regression Trees (CART)</a></li>
<li class="chapter" data-level="67.3" data-path="trees-and-random-forests.html"><a href="trees-and-random-forests.html#regression-tree"><i class="fa fa-check"></i><b>67.3</b> Regression tree</a></li>
<li class="chapter" data-level="67.4" data-path="trees-and-random-forests.html"><a href="trees-and-random-forests.html#classification-decision-trees"><i class="fa fa-check"></i><b>67.4</b> Classification (decision) trees</a></li>
<li class="chapter" data-level="67.5" data-path="trees-and-random-forests.html"><a href="trees-and-random-forests.html#random-forests"><i class="fa fa-check"></i><b>67.5</b> Random Forests</a></li>
<li class="chapter" data-level="" data-path="trees-and-random-forests.html"><a href="trees-and-random-forests.html#exercises-51"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="68" data-path="case-study-mnist.html"><a href="case-study-mnist.html"><i class="fa fa-check"></i><b>68</b> Case study: MNIST</a><ul>
<li class="chapter" data-level="68.1" data-path="case-study-mnist.html"><a href="case-study-mnist.html#preprocessing"><i class="fa fa-check"></i><b>68.1</b> Preprocessing</a></li>
<li class="chapter" data-level="68.2" data-path="case-study-mnist.html"><a href="case-study-mnist.html#knn"><i class="fa fa-check"></i><b>68.2</b> kNN</a></li>
<li class="chapter" data-level="68.3" data-path="case-study-mnist.html"><a href="case-study-mnist.html#variable-importance"><i class="fa fa-check"></i><b>68.3</b> Variable importance</a></li>
<li class="chapter" data-level="68.4" data-path="case-study-mnist.html"><a href="case-study-mnist.html#visual-assessments"><i class="fa fa-check"></i><b>68.4</b> Visual assessments</a></li>
</ul></li>
<li class="chapter" data-level="69" data-path="ensembles.html"><a href="ensembles.html"><i class="fa fa-check"></i><b>69</b> Ensembles</a><ul>
<li class="chapter" data-level="" data-path="ensembles.html"><a href="ensembles.html#exercises-52"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="70" data-path="dimension-reduction.html"><a href="dimension-reduction.html"><i class="fa fa-check"></i><b>70</b> Dimension Reduction</a><ul>
<li class="chapter" data-level="70.1" data-path="dimension-reduction.html"><a href="dimension-reduction.html#preserving-distance"><i class="fa fa-check"></i><b>70.1</b> Preserving distance</a></li>
<li class="chapter" data-level="70.2" data-path="dimension-reduction.html"><a href="dimension-reduction.html#linear-transformations-advnced"><i class="fa fa-check"></i><b>70.2</b> Linear transformations (advnced)</a></li>
<li class="chapter" data-level="70.3" data-path="dimension-reduction.html"><a href="dimension-reduction.html#orthogogal-transformations-advaced"><i class="fa fa-check"></i><b>70.3</b> Orthogogal transformations (advaced)</a></li>
<li class="chapter" data-level="70.4" data-path="dimension-reduction.html"><a href="dimension-reduction.html#principal-component-analysis"><i class="fa fa-check"></i><b>70.4</b> Principal Component Analysis</a></li>
<li class="chapter" data-level="70.5" data-path="dimension-reduction.html"><a href="dimension-reduction.html#iris-example"><i class="fa fa-check"></i><b>70.5</b> Iris Example</a></li>
<li class="chapter" data-level="70.6" data-path="dimension-reduction.html"><a href="dimension-reduction.html#mnist"><i class="fa fa-check"></i><b>70.6</b> MNIST</a></li>
<li class="chapter" data-level="" data-path="dimension-reduction.html"><a href="dimension-reduction.html#exercises-53"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="71" data-path="recommendation-systems.html"><a href="recommendation-systems.html"><i class="fa fa-check"></i><b>71</b> Recommendation systems</a><ul>
<li class="chapter" data-level="71.1" data-path="recommendation-systems.html"><a href="recommendation-systems.html#movielens-data"><i class="fa fa-check"></i><b>71.1</b> Movielens data</a></li>
<li class="chapter" data-level="71.2" data-path="recommendation-systems.html"><a href="recommendation-systems.html#recommendation-systems-as-a-machine-learning-challenge"><i class="fa fa-check"></i><b>71.2</b> Recommendation systems as a machine learning challenge</a><ul>
<li class="chapter" data-level="71.2.1" data-path="recommendation-systems.html"><a href="recommendation-systems.html#loss-function"><i class="fa fa-check"></i><b>71.2.1</b> Loss function</a></li>
<li class="chapter" data-level="71.2.2" data-path="recommendation-systems.html"><a href="recommendation-systems.html#a-first-model"><i class="fa fa-check"></i><b>71.2.2</b> A first model</a></li>
</ul></li>
<li class="chapter" data-level="71.3" data-path="recommendation-systems.html"><a href="recommendation-systems.html#modeling-movie-effects"><i class="fa fa-check"></i><b>71.3</b> Modeling movie effects</a><ul>
<li class="chapter" data-level="71.3.1" data-path="recommendation-systems.html"><a href="recommendation-systems.html#user-effects"><i class="fa fa-check"></i><b>71.3.1</b> User effects</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="recommendation-systems.html"><a href="recommendation-systems.html#exercises-54"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="72" data-path="regularization.html"><a href="regularization.html"><i class="fa fa-check"></i><b>72</b> Regularization</a><ul>
<li class="chapter" data-level="72.1" data-path="regularization.html"><a href="regularization.html#motivation"><i class="fa fa-check"></i><b>72.1</b> Motivation</a></li>
<li class="chapter" data-level="72.2" data-path="regularization.html"><a href="regularization.html#penalized-least-squares"><i class="fa fa-check"></i><b>72.2</b> Penalized Least Squares</a></li>
<li class="chapter" data-level="72.3" data-path="regularization.html"><a href="regularization.html#choosing-the-penalty-terms"><i class="fa fa-check"></i><b>72.3</b> Choosing the penalty terms</a></li>
<li class="chapter" data-level="" data-path="regularization.html"><a href="regularization.html#exercises-55"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="73" data-path="matrix-factorization.html"><a href="matrix-factorization.html"><i class="fa fa-check"></i><b>73</b> Matrix factorization</a><ul>
<li class="chapter" data-level="73.1" data-path="matrix-factorization.html"><a href="matrix-factorization.html#factors-1"><i class="fa fa-check"></i><b>73.1</b> Factors</a></li>
<li class="chapter" data-level="73.2" data-path="matrix-factorization.html"><a href="matrix-factorization.html#connection-to-svd-and-pca"><i class="fa fa-check"></i><b>73.2</b> Connection to SVD and PCA</a></li>
<li class="chapter" data-level="" data-path="matrix-factorization.html"><a href="matrix-factorization.html#exercises-56"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="74" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>74</b> Clustering</a><ul>
<li class="chapter" data-level="74.1" data-path="clustering.html"><a href="clustering.html#hierarchical-clustering"><i class="fa fa-check"></i><b>74.1</b> Hierarchical clustering</a></li>
<li class="chapter" data-level="74.2" data-path="clustering.html"><a href="clustering.html#k-means"><i class="fa fa-check"></i><b>74.2</b> k-means</a></li>
<li class="chapter" data-level="74.3" data-path="clustering.html"><a href="clustering.html#heatmaps"><i class="fa fa-check"></i><b>74.3</b> Heatmaps</a></li>
<li class="chapter" data-level="74.4" data-path="clustering.html"><a href="clustering.html#filtering-features"><i class="fa fa-check"></i><b>74.4</b> Filtering features</a></li>
<li class="chapter" data-level="" data-path="clustering.html"><a href="clustering.html#exercises-57"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="part"><span><b>VIII Productivity tools</b></span></li>
<li class="chapter" data-level="75" data-path="installing-r-rstudio-and-git.html"><a href="installing-r-rstudio-and-git.html"><i class="fa fa-check"></i><b>75</b> Installing R, RStudio and Git</a><ul>
<li class="chapter" data-level="75.1" data-path="installing-r-rstudio-and-git.html"><a href="installing-r-rstudio-and-git.html#installing-r-1"><i class="fa fa-check"></i><b>75.1</b> Installing R</a></li>
<li class="chapter" data-level="75.2" data-path="installing-r-rstudio-and-git.html"><a href="installing-r-rstudio-and-git.html#installing-rstudio-1"><i class="fa fa-check"></i><b>75.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="75.3" data-path="installing-r-rstudio-and-git.html"><a href="installing-r-rstudio-and-git.html#installing-git"><i class="fa fa-check"></i><b>75.3</b> Installing Git</a><ul>
<li class="chapter" data-level="75.3.1" data-path="installing-r-rstudio-and-git.html"><a href="installing-r-rstudio-and-git.html#installing-git-and-git-bash-on-windows"><i class="fa fa-check"></i><b>75.3.1</b> Installing Git and Git Bash on Windows</a></li>
<li class="chapter" data-level="75.3.2" data-path="installing-r-rstudio-and-git.html"><a href="installing-r-rstudio-and-git.html#installing-git-on-the-mac"><i class="fa fa-check"></i><b>75.3.2</b> Installing Git on the Mac</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="76" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>76</b> GitHub</a><ul>
<li class="chapter" data-level="76.1" data-path="github.html"><a href="github.html#github-accounts"><i class="fa fa-check"></i><b>76.1</b> GitHub Accounts</a></li>
<li class="chapter" data-level="76.2" data-path="github.html"><a href="github.html#github-repositories"><i class="fa fa-check"></i><b>76.2</b> GitHub repositories</a></li>
</ul></li>
<li class="chapter" data-level="77" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>77</b> RStudio</a><ul>
<li class="chapter" data-level="77.1" data-path="rstudio.html"><a href="rstudio.html#the-panes"><i class="fa fa-check"></i><b>77.1</b> The panes</a></li>
<li class="chapter" data-level="77.2" data-path="rstudio.html"><a href="rstudio.html#key-bindings"><i class="fa fa-check"></i><b>77.2</b> Key bindings</a></li>
<li class="chapter" data-level="77.3" data-path="rstudio.html"><a href="rstudio.html#installing-r-packages"><i class="fa fa-check"></i><b>77.3</b> Installing R packages</a></li>
<li class="chapter" data-level="77.4" data-path="rstudio.html"><a href="rstudio.html#running-commands-while-editing-scripts"><i class="fa fa-check"></i><b>77.4</b> Running commands while editing scripts</a></li>
<li class="chapter" data-level="77.5" data-path="rstudio.html"><a href="rstudio.html#global-options"><i class="fa fa-check"></i><b>77.5</b> Global options</a></li>
<li class="chapter" data-level="77.6" data-path="rstudio.html"><a href="rstudio.html#keeping-organized-with-rstudio-projects"><i class="fa fa-check"></i><b>77.6</b> Keeping organized with RStudio projects</a></li>
<li class="chapter" data-level="77.7" data-path="rstudio.html"><a href="rstudio.html#using-git-and-github-in-rstudio"><i class="fa fa-check"></i><b>77.7</b> Using Git and GitHub in RStudio</a></li>
<li class="chapter" data-level="77.8" data-path="rstudio.html"><a href="rstudio.html#running-r-without-rstudio"><i class="fa fa-check"></i><b>77.8</b> Running R without RStudio</a></li>
</ul></li>
<li class="chapter" data-level="78" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html"><i class="fa fa-check"></i><b>78</b> Organizing with Unix</a><ul>
<li class="chapter" data-level="78.1" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#the-terminal"><i class="fa fa-check"></i><b>78.1</b> The terminal</a></li>
<li class="chapter" data-level="78.2" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#the-filesystem"><i class="fa fa-check"></i><b>78.2</b> The filesystem</a><ul>
<li class="chapter" data-level="78.2.1" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#directories-and-subdirectories"><i class="fa fa-check"></i><b>78.2.1</b> Directories and subdirectories</a></li>
<li class="chapter" data-level="78.2.2" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#the-home-directory"><i class="fa fa-check"></i><b>78.2.2</b> The home directory</a></li>
<li class="chapter" data-level="78.2.3" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#working-directory"><i class="fa fa-check"></i><b>78.2.3</b> Working directory</a></li>
<li class="chapter" data-level="78.2.4" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#paths"><i class="fa fa-check"></i><b>78.2.4</b> Paths</a></li>
</ul></li>
<li class="chapter" data-level="78.3" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#unix-commands"><i class="fa fa-check"></i><b>78.3</b> Unix commands</a><ul>
<li class="chapter" data-level="78.3.1" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#ls-listing-directory-content"><i class="fa fa-check"></i><b>78.3.1</b> <code>ls</code>: Listing directory content</a></li>
<li class="chapter" data-level="78.3.2" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#mkdir-and-rmdir-make-and-remove-a-directory"><i class="fa fa-check"></i><b>78.3.2</b> <code>mkdir</code> and <code>rmdir</code>: make and remove a directory</a></li>
<li class="chapter" data-level="78.3.3" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#cd-navigating-the-filesystem-by-changing-directories"><i class="fa fa-check"></i><b>78.3.3</b> <code>cd</code>: Navigating the filesystem by changing directories</a></li>
</ul></li>
<li class="chapter" data-level="78.4" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#some-examples"><i class="fa fa-check"></i><b>78.4</b> Some examples</a></li>
<li class="chapter" data-level="78.5" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#more-unix-commands"><i class="fa fa-check"></i><b>78.5</b> More Unix commands</a><ul>
<li class="chapter" data-level="78.5.1" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#mv-moving-files"><i class="fa fa-check"></i><b>78.5.1</b> <code>mv</code>: moving files</a></li>
<li class="chapter" data-level="78.5.2" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#cp-copying-files"><i class="fa fa-check"></i><b>78.5.2</b> <code>cp</code>: copying files</a></li>
<li class="chapter" data-level="78.5.3" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#rm-removing-files"><i class="fa fa-check"></i><b>78.5.3</b> <code>rm</code>: removing files</a></li>
<li class="chapter" data-level="78.5.4" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#less-looking-at-a-file"><i class="fa fa-check"></i><b>78.5.4</b> <code>less</code>: looking at a file</a></li>
</ul></li>
<li class="chapter" data-level="78.6" data-path="organizing-with-unix.html"><a href="organizing-with-unix.html#preparing-for-a-data-science-project"><i class="fa fa-check"></i><b>78.6</b> Preparing for a data science project</a></li>
</ul></li>
<li class="chapter" data-level="79" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>79</b> Git</a><ul>
<li class="chapter" data-level="79.1" data-path="git.html"><a href="git.html#why-use-git-and-github"><i class="fa fa-check"></i><b>79.1</b> Why use Git and GitHub?</a></li>
<li class="chapter" data-level="79.2" data-path="git.html"><a href="git.html#overview-of-git"><i class="fa fa-check"></i><b>79.2</b> Overview of Git</a><ul>
<li class="chapter" data-level="79.2.1" data-path="git.html"><a href="git.html#clone"><i class="fa fa-check"></i><b>79.2.1</b> Clone</a></li>
</ul></li>
<li class="chapter" data-level="79.3" data-path="git.html"><a href="git.html#initilazing-a-git-directory"><i class="fa fa-check"></i><b>79.3</b> Initilazing a Git directory</a></li>
</ul></li>
<li class="chapter" data-level="80" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html"><i class="fa fa-check"></i><b>80</b> Reproducible reports with R Markdown</a><ul>
<li class="chapter" data-level="80.1" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#r-markdown"><i class="fa fa-check"></i><b>80.1</b> R Markdown</a><ul>
<li class="chapter" data-level="80.1.1" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#the-header"><i class="fa fa-check"></i><b>80.1.1</b> The header</a></li>
<li class="chapter" data-level="80.1.2" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#r-code-chunks"><i class="fa fa-check"></i><b>80.1.2</b> R code chunks</a></li>
<li class="chapter" data-level="80.1.3" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#global-options-1"><i class="fa fa-check"></i><b>80.1.3</b> Global options</a></li>
</ul></li>
<li class="chapter" data-level="80.2" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#knitr"><i class="fa fa-check"></i><b>80.2</b> knitR</a></li>
<li class="chapter" data-level="80.3" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#more-on-r-markdown"><i class="fa fa-check"></i><b>80.3</b> More on R markdown</a></li>
</ul></li>
<li class="chapter" data-level="81" data-path="advanced-unix.html"><a href="advanced-unix.html"><i class="fa fa-check"></i><b>81</b> Advanced Unix</a><ul>
<li class="chapter" data-level="81.1" data-path="advanced-unix.html"><a href="advanced-unix.html#arguments"><i class="fa fa-check"></i><b>81.1</b> Arguments</a></li>
<li class="chapter" data-level="81.2" data-path="advanced-unix.html"><a href="advanced-unix.html#getting-help"><i class="fa fa-check"></i><b>81.2</b> Getting help</a></li>
<li class="chapter" data-level="81.3" data-path="advanced-unix.html"><a href="advanced-unix.html#pipes"><i class="fa fa-check"></i><b>81.3</b> Pipes</a></li>
<li class="chapter" data-level="81.4" data-path="advanced-unix.html"><a href="advanced-unix.html#wild-cards"><i class="fa fa-check"></i><b>81.4</b> Wild cards</a></li>
<li class="chapter" data-level="81.5" data-path="advanced-unix.html"><a href="advanced-unix.html#environment-variables"><i class="fa fa-check"></i><b>81.5</b> Environment variables</a></li>
<li class="chapter" data-level="81.6" data-path="advanced-unix.html"><a href="advanced-unix.html#shells"><i class="fa fa-check"></i><b>81.6</b> Shells</a></li>
<li class="chapter" data-level="81.7" data-path="advanced-unix.html"><a href="advanced-unix.html#executables"><i class="fa fa-check"></i><b>81.7</b> Executables</a></li>
<li class="chapter" data-level="81.8" data-path="advanced-unix.html"><a href="advanced-unix.html#permissions-and-file-types"><i class="fa fa-check"></i><b>81.8</b> Permissions and file types</a></li>
<li class="chapter" data-level="81.9" data-path="advanced-unix.html"><a href="advanced-unix.html#commands-you-should-learn"><i class="fa fa-check"></i><b>81.9</b> Commands you should learn</a></li>
<li class="chapter" data-level="81.10" data-path="advanced-unix.html"><a href="advanced-unix.html#file-manipulation-in-r"><i class="fa fa-check"></i><b>81.10</b> File manipulation in R</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="case-study-trends-in-world-health-and-economics" class="section level1">
<h1><span class="header-section-number">Chapter 20</span> Case study: Trends in world health and economics</h1>
<p>In this section, we will demonstrate how relatively simple <strong>ggplot2</strong> code can create insightful and aesthetically pleasing plots that help us better understand trends in world health and economics. We later augment the code somewhat to perfect the plots and describe some general data visualization principles.</p>
<div id="example-1-life-expectancy-and-fertility-rates" class="section level2">
<h2><span class="header-section-number">20.1</span> Example 1: Life expectancy and fertility rates</h2>
<p><a href="https://en.wikipedia.org/wiki/Hans_Rosling">Hans Rosling</a> was the co-founder of the <a href="http://www.gapminder.org/">Gapminder Foundation</a>, an organization dedicated to educating the public by using data to dispel common myths about the so-called developing world. The organization uses data to show how actual trends in health and economics contradict the narratives that emanate from sensationalist media coverage of catastrophes, tragedies and other unfortunate events. As stated in the Gapminder Foundation’s website:</p>
<blockquote>
<blockquote>
<blockquote>
<p>Journalists and lobbyists tell dramatic stories. That’s their job. They tell stories about extraordinary events and unusual people. The piles of dramatic stories pile up in peoples’ minds into an over-dramatic worldview and strong negative stress feelings: “The world is getting worse!”, “It’s we vs. them!”, “Other people are strange!”, “The population just keeps growing!” and “Nobody cares!”</p>
</blockquote>
</blockquote>
</blockquote>
<p>Hans Rosling conveyed actual data-based trends in a dramatic way of his own, using effective data visualization. This section is based on two talks that exemplify this approach to education: <a href="https://www.ted.com/talks/hans_rosling_reveals_new_insights_on_poverty?language=en">New Insights on Poverty</a> and <a href="https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen">The Best Stats You’ve Ever Seen</a>. Specifically, in this section, we use data to attempt to answer the following two questions:</p>
<ol style="list-style-type: decimal">
<li>Is it a fair characterization of today’s world to say it is divided into western rich nations and the developing world in Africa, Asia and Latin America?</li>
<li>Has income inequality across countries worsened during the last 40 years?</li>
</ol>
<p>To answer these questions, we will be using the <code>gapminder</code> dataset provided in <strong>dslabs</strong>. This dataset was created using a number of spreadsheets available from the <a href="http://www.gapminder.org/">Gapminder</a> Foundation. You can access the table like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dslabs)
<span class="kw">data</span>(gapminder)
<span class="kw">head</span>(gapminder)
<span class="co">#&gt;               country year infant_mortality life_expectancy fertility</span>
<span class="co">#&gt; 1             Albania 1960            115.4            62.9      6.19</span>
<span class="co">#&gt; 2             Algeria 1960            148.2            47.5      7.65</span>
<span class="co">#&gt; 3              Angola 1960            208.0            36.0      7.32</span>
<span class="co">#&gt; 4 Antigua and Barbuda 1960               NA            63.0      4.43</span>
<span class="co">#&gt; 5           Argentina 1960             59.9            65.4      3.11</span>
<span class="co">#&gt; 6             Armenia 1960               NA            66.9      4.55</span>
<span class="co">#&gt;   population      gdp continent          region</span>
<span class="co">#&gt; 1    1636054       NA    Europe Southern Europe</span>
<span class="co">#&gt; 2   11124892 1.38e+10    Africa Northern Africa</span>
<span class="co">#&gt; 3    5270844       NA    Africa   Middle Africa</span>
<span class="co">#&gt; 4      54681       NA  Americas       Caribbean</span>
<span class="co">#&gt; 5   20619075 1.08e+11  Americas   South America</span>
<span class="co">#&gt; 6    1867396       NA      Asia    Western Asia</span></code></pre></div>
<div id="hans-roslings-quiz" class="section level3 unnumbered">
<h3>Hans Rosling’s quiz</h3>
<p>As done in the <em>New Insights on Poverty</em> video, we start by testing our knowledge regarding differences in child mortality across different countries.</p>
<p>For each of the six pairs of countries below, which country do you think had the highest child mortality rates in 2015? Which pairs do you think are most similar?</p>
<ol style="list-style-type: decimal">
<li>Sri Lanka or Turkey</li>
<li>Poland or South Korea</li>
<li>Malaysia or Russia</li>
<li>Pakistan or Vietnam</li>
<li>Thailand or South Africa</li>
</ol>
<p>When answering these questions without data, the non-European countries are typically picked as having higher child mortality rates: Sri Lanka over Turkey, South Korea over Poland, and Malaysia over Russia. It is also common to assume that countries considered to be part of the developing world: Pakistan, Vietnam, Thailand and South Africa, have similarly high mortality rates.</p>
<p>To answer these questions <strong>with data</strong>, we can use <strong>dplyr</strong>. For example, for the first comparison we see that:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2015</span> <span class="op">&amp;</span><span class="st"> </span>country <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Sri Lanka&quot;</span>,<span class="st">&quot;Turkey&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(country, infant_mortality)
<span class="co">#&gt;     country infant_mortality</span>
<span class="co">#&gt; 1 Sri Lanka              8.4</span>
<span class="co">#&gt; 2    Turkey             11.6</span></code></pre></div>
<p>Turkey has the higher infant mortality rate.</p>
<p>We can use this code on all comparisons and find the following:</p>
<table>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="right">infant_mortality</th>
<th align="left">country1</th>
<th align="right">infant_mortality1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Sri Lanka</td>
<td align="right">8.4</td>
<td align="left">Turkey</td>
<td align="right">11.6</td>
</tr>
<tr class="even">
<td align="left">Poland</td>
<td align="right">4.5</td>
<td align="left">South Korea</td>
<td align="right">2.9</td>
</tr>
<tr class="odd">
<td align="left">Malaysia</td>
<td align="right">6.0</td>
<td align="left">Russia</td>
<td align="right">8.2</td>
</tr>
<tr class="even">
<td align="left">Pakistan</td>
<td align="right">65.8</td>
<td align="left">Vietnam</td>
<td align="right">17.3</td>
</tr>
<tr class="odd">
<td align="left">Thailand</td>
<td align="right">10.5</td>
<td align="left">South Africa</td>
<td align="right">33.6</td>
</tr>
</tbody>
</table>
<p>We see that the European countries on this list have higher child mortality rates: Poland has a higher rate than South Korea, and Russia has a higher rate than Malaysia. We also see that Pakistan has a much higher rate than Vietnam, and South Africa has a much higher rate than Thailand. It turns out that when Hans Rosling gave this quiz to educated groups of people, the average score was less than 2.5. The average score was worse than what they would have obtained had they guessed randomly. This implies that more than ignorant, we are misinformed.</p>
</div>
<div id="a-scatterplot" class="section level3 unnumbered">
<h3>A scatterplot</h3>
<p>The reason for this stems from the preconceived notion that the world is divided into two groups: the western world (Western Europe and North America), characterized by long life spans and small families, versus the developing world (Africa, Asia, and Latin America) characterized by short life spans and large families. But, does the data support this dichotomous view?</p>
<p>The necessary data to answer this question is also available in our <code>gapminder</code> table. Using our newly learned data visualization skills, we will be able to tackle this challenge.</p>
<p>In order to analyze this world view, our first plot is a scatterplot of life expectancy versus fertility rates (average number of children per woman). We start by looking at data from about 50 years ago, when perhaps this view was first cemented in our minds.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(gapminder, year<span class="op">==</span><span class="dv">1962</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>( <span class="kw">aes</span>(fertility, life_expectancy)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="book_files/figure-html/fertility-versus-life-expectancy-1962-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Most points fall into two distinct categories:</p>
<ol style="list-style-type: decimal">
<li>Life expectancy around 70 years and 3 or less children per family.</li>
<li>Life expectancy lower then 65 years and more than 5 children per family.</li>
</ol>
<p>To confirm that indeed these countries are from the regions we expect, we can use color to represent continent.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(gapminder, year<span class="op">==</span><span class="dv">1962</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>( <span class="kw">aes</span>(fertility, life_expectancy, <span class="dt">color =</span> continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() </code></pre></div>
<p><img src="book_files/figure-html/fertility-versus-life-expectancy-1962-with-color-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>So in 1962, “the west versus developing world” view was grounded in some reality. But is this still the case 50 years later?</p>
</div>
</div>
<div id="faceting" class="section level2">
<h2><span class="header-section-number">20.2</span> Faceting</h2>
<p>We could easily plot the 2012 data in the same way we did for 1962. But to compare, side by side plots are preferable. In <strong>ggplot2</strong>, we can achieve this by <em>faceting variables</em>: we stratify the data by some variable and make the same plot for each strata.</p>
<p>To achieve faceting, we add a layer with the function <code>facet_grid</code>, which automatically separates the plots. This function lets you facet by up to two variables using columns to represent one variable and rows to represent the other. The function expects the row and column variables to be separated by a <code>~</code>. Here is an example of a scatterplot with <code>facet_grid</code> added as the last layer:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(gapminder, year<span class="op">%in%</span><span class="kw">c</span>(<span class="dv">1962</span>, <span class="dv">2012</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(fertility, life_expectancy, <span class="dt">col =</span> continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_grid</span>(continent<span class="op">~</span>year)</code></pre></div>
<p><img src="book_files/figure-html/fertility-versus-life-expectancy-facet-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>We see a plot for each continent/year pair. However, this is just an example and more than what we want, which is simply to compare 1962 and 2012. In this case, there is just one variable and we use <code>.</code> to let facet know that we are not using one of the variables:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(gapminder, year<span class="op">%in%</span><span class="kw">c</span>(<span class="dv">1962</span>, <span class="dv">2012</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(fertility, life_expectancy, <span class="dt">col =</span> continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_grid</span>( . <span class="op">~</span><span class="st"> </span>year)</code></pre></div>
<p><img src="book_files/figure-html/fertility-versus-life-expectancy-two-years-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>This plot clearly shows that the majority of countries have moved from the <em>developing world</em> cluster to the <em>western world</em> one. In 2012, the western versus developing world view no longer makes sense. This is particularly clear when comparing Europe to Asia, the latter which includes several countries that have made great improvements.</p>
<div id="facet_wrap" class="section level3 unnumbered">
<h3><code>facet_wrap</code></h3>
<p>To explore how this transformation happened through the years, we can make the plot for several years. For example, we can add 1970, 1980, 1990, and 2000. If we do this, we will not want all the plots on the same row, the default behavior of <code>facet_grid</code>, since they will become too thin to show the data. Instead, we will want to use multiple rows and columns. The function <code>facet_wrap</code> permits us to do this by automatically wrapping the series of plots so that each display has viewable dimensions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">years &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1962</span>, <span class="dv">1980</span>, <span class="dv">1990</span>, <span class="dv">2000</span>, <span class="dv">2012</span>)
continents &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Europe&quot;</span>, <span class="st">&quot;Asia&quot;</span>)
gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>years <span class="op">&amp;</span><span class="st"> </span>continent <span class="op">%in%</span><span class="st"> </span>continents) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>( <span class="kw">aes</span>(fertility, life_expectancy, <span class="dt">col =</span> continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>year) </code></pre></div>
<p><img src="book_files/figure-html/fertility-versus-life-expectancy-five-years-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>This plot clearly shows how most Asian countries have improved at a much faster rate than European ones.</p>
</div>
</div>
<div id="fixed-scales-for-better-comparisons" class="section level2">
<h2><span class="header-section-number">20.3</span> Fixed scales for better comparisons</h2>
<p>The default choice of the range of the axes is an important one. When not using <code>facet</code>, this range is determined by the data shown in the plot. When using <code>facet</code>, this range is determined by the data shown in all plots and therefore kept fixed across plots. This makes comparisons across plots much easier. For example, in the above plot, we can see that life expectancy has increased and the fertility has decreased across most countries. We see this because the cloud of points moves. This is not the case if we adjust the scales:</p>
<p><img src="book_files/figure-html/facet-without-fixed-scales-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>In the plot above, we have to pay special attention to the range to notice that the plot on the right has a larger life expectancy.</p>
</div>
<div id="time-series-plots" class="section level2">
<h2><span class="header-section-number">20.4</span> Time series plots</h2>
<p>The visualizations above effectively illustrates that data no longer supports the western versus developing world view. Once we see these plots, new questions emerge. For example, which countries are improving more and which ones less? Was the improvement constant during the last 50 years or was it more accelerated during certain periods? For a closer look that may help answer these questions, we introduce <em>time series plots</em>.</p>
<p>Time series plots have time in the x-axis and an outcome or measurement of interest on the y-axis. For example, here is a trend plot of United States fertility rates:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;United States&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year,fertility)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="book_files/figure-html/fertility-time-series-plot-points-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>We see that the trend is not linear at all. Instead there is sharp drop during the 60s and 70s to below 2. Then the trend comes back to 2 and stabilizes during the 90s.</p>
<p>When the points are regularly and densely spaced, as they are here, we create curves by joining the points with lines, to convey that these data are from a single country. To do this, we use the <code>geom_line</code> function instead of <code>geom_point</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;United States&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year,fertility)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="book_files/figure-html/fertility-time-series-plot-curve-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>This is particularly helpful when we look at two countries. If we subset the data to include two countries, one from Europe and one from Asia, then adapt the code above:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">countries &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;South Korea&quot;</span>,<span class="st">&quot;Germany&quot;</span>)
gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span>countries) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year,fertility)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="book_files/figure-html/wrong-time-series-plot-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Unfortunately, this is <strong>not</strong> the plot that we want. Rather than a line for each country, the points for both countries are joined. This is actually expected since we have not told <code>ggplot</code> anything about wanting two separate lines. To let <code>ggplot</code> know that there are two curves that need to be made separately, we assign each point to a <code>group</code>, one for each country:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">countries &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;South Korea&quot;</span>,<span class="st">&quot;Germany&quot;</span>)
gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span>countries) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year,fertility, <span class="dt">group =</span> country)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="book_files/figure-html/time-series-two-curves-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>But which line goes with which country? We can assign colors to make this distinction. A useful side-effect of using the <code>color</code> argument to assign different colors to the different countries is that the data is automatically grouped:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">countries &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;South Korea&quot;</span>,<span class="st">&quot;Germany&quot;</span>)
gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span>countries) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year,fertility, <span class="dt">col =</span> country)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()
<span class="co">#&gt; Warning: Removed 2 rows containing missing values (geom_path).</span></code></pre></div>
<p><img src="book_files/figure-html/fertility-time-series-plot-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>The plot clearly shows how South Korea’s fertility rate dropped drastically during the 60s and 70s, and by 1990 had a similar rate to that of Germany.</p>
</div>
<div id="labels-for-legends" class="section level2">
<h2><span class="header-section-number">20.5</span> Labels for legends</h2>
<p>For trend plots we recommend labeling the lines rather than using legends since the viewer can quickly see which line is which country. This suggestion actually applies to most plots: labeling is usually preferred over legends.</p>
<p>We demonstrate how we can do this using the life expectancy data. We define a data table with the label locations and then use a second mapping just for these labels:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">labels &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">country =</span> countries, <span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1975</span>,<span class="dv">1965</span>), <span class="dt">y =</span> <span class="kw">c</span>(<span class="dv">60</span>,<span class="dv">72</span>))

gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span>countries) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, life_expectancy, <span class="dt">col =</span> country)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">data =</span> labels, <span class="kw">aes</span>(x, y, <span class="dt">label =</span> country), <span class="dt">size =</span> <span class="dv">5</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)</code></pre></div>
<p><img src="book_files/figure-html/labels-better-than-legends-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>The plot clearly shows how an improvement in life expectancy followed the drops in fertility rates. In 1960, Germans lived 15 years longer than South Koreans, although by 2010 the gap is completely closed. It exemplifies the improvement that many non-western countries have achieved in the last 40 years.</p>
</div>
<div id="example-2-income-distribution" class="section level2">
<h2><span class="header-section-number">20.6</span> Example 2: Income distribution</h2>
<p>Another commonly held notion is that wealth distribution across the world has become worse during the last decades. When general audiences are asked if poor countries have become poorer and rich countries become richer, the majority answers yes. By using stratification, histograms, smooth densities, and boxplots, we will be able to understand if this is in fact the case. We will also learn how transformations can sometimes help provide more informative summaries and plots.</p>
</div>
<div id="transformations" class="section level2">
<h2><span class="header-section-number">20.7</span> Transformations</h2>
<p>The <code>gapminder</code> data table includes a column with the countries gross domestic product (GDP). GDP measures the market value of goods and services produced by a country in a year. The GDP per person is often used as a rough summary of a country’s wealth. Here we divide this quantity by 365 to obtain the more interpretable measure <em>dollars per day</em>. Using current US dollars as a unit, a person surviving on an income of less than $2 a day is defined to be living in <em>absolute poverty</em>. We add this variable to the data table:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">dollars_per_day =</span> gdp<span class="op">/</span>population<span class="op">/</span><span class="dv">365</span>)</code></pre></div>
<p>The GDP values are adjusted for inflation and represent current US dollars, so these values are meant to be comparable across the years. Of course, these are country averages and within each country there is much variability. All the graphs and insights described below relate to country averages and not to individuals.</p>
<div id="country-income-distribution" class="section level3 unnumbered">
<h3>Country income distribution</h3>
<p>Here is a histogram of per day incomes from 1970:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">past_year &lt;-<span class="st"> </span><span class="dv">1970</span>
gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)</code></pre></div>
<p><img src="book_files/figure-html/dollars-per-day-distribution-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>We use the <code>color = &quot;black&quot;</code> argument to draw a boundary and clearly distinguish the bins.</p>
<p>In this plot, we see that for the majority of countries, averages are below $10 a day. However, the majority of the x-axis is dedicated to the 35 countries with averages above $10. So the plot is not very informative about countries with values below $10 a day.</p>
<p>It might be more informative to quickly be able to see how many countries have average daily incomes of about $1 (extremely poor), $2 (very poor), $4 (poor), $8 (middle), $16 (well off), $32 (rich), $64 (very rich) per day. These changes are multiplicative and log transformations convert multiplicative changes into additive ones: when using base 2, a doubling of a value turns into an increase by 1.</p>
<p>Here is the distribution if we apply a log base 2 transform:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="kw">log2</span>(dollars_per_day))) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)</code></pre></div>
<p><img src="book_files/figure-html/dollars-per-day-distribution-log-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>In a way this provides a <em>close up</em> of the mid to lower income countries.</p>
</div>
<div id="which-base" class="section level3 unnumbered">
<h3>Which base?</h3>
<p>In the case above, we used base 2 in the log transformations. Other common choices are base <span class="math inline">\(\mathrm{e}\)</span> (the natural log) and base 10.</p>
<p>In general, we do not recommend using the natural log for data exploration and visualization. This is because while <span class="math inline">\(2^2, 2^3, 2^4, \dots\)</span> or <span class="math inline">\(10^1, 10^2, \dots\)</span> are easy to compute in our heads, the same is not true for <span class="math inline">\(\mathrm{e}^2, \mathrm{e}^3, \dots\)</span>.</p>
<p>In the dollars per day example, we used base 2 instead of base 10 because the resulting range is easier to interpret. The range of the values being plotted is 0.327, 48.885.</p>
<p>In base 10, this turns into a range that includes very few integers: just 0 and 1. With base two, our range includes -2, -1, 0, 1, 2, 3, 4 and 5. It is easier to compute <span class="math inline">\(2^x\)</span> and <span class="math inline">\(10^x\)</span> when <span class="math inline">\(x\)</span> is an integer and between -10 and 10, so we prefer to have smaller integers in the scale. Another consequence of a limited range is that choosing the binwidth is more challenging. With log base 2, we know that a binwidth of 1 will translate to a bin with range <span class="math inline">\(x\)</span> to <span class="math inline">\(2x\)</span>.</p>
<p>For an example in which base 10 makes more sense, consider population sizes. A log base 10 is preferable since the range for these is:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(gapminder, year <span class="op">==</span><span class="st"> </span>past_year) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">min =</span> <span class="kw">min</span>(population), <span class="dt">max =</span> <span class="kw">max</span>(population))
<span class="co">#&gt;     min      max</span>
<span class="co">#&gt; 1 46075 8.09e+08</span></code></pre></div>
<p>Here is the histogram of the transformed values:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="kw">log10</span>(population))) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="fl">0.5</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)</code></pre></div>
<p><img src="book_files/figure-html/population-histogram-log10-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>In the above, we quickly see that country populations range between ten thousand and ten billion.</p>
</div>
<div id="transform-the-values-or-the-scale" class="section level3 unnumbered">
<h3>Transform the values or the scale?</h3>
<p>There are two ways we can use log transformations in plots. We can log the values before plotting them or use log scales in the axes. Both approaches are useful and have different strengths. If we log the data, we can more easily interpret intermediate values in the scale. For example, if we see:</p>
<blockquote>
<blockquote>
<p>—-1—-x—-2——–3—-</p>
</blockquote>
</blockquote>
<p>for log transformed data, we know that the value of <span class="math inline">\(x\)</span> is about 1.5. If the scales are logged:</p>
<blockquote>
<blockquote>
<p>—-1—-x—-10——100—</p>
</blockquote>
</blockquote>
<p>then, to determine <code>x</code>, we need to compute <span class="math inline">\(10^{1.5}\)</span>, which is not easy to do in our heads. The advantage of using logged scales is that we see the original values on the axes. However, the advantage of showing logged scales is that the original values are displayed in the plot, which are easier to interpret. For example, we would see “32 dollars a day” instead of “5 log base 2 dollars a day”.</p>
<p>As we learned earlier, if we want to scale the axis with logs, we can use the <code>scale_x_ccontinuous</code> function. So instead of logging the values first, we apply this layer:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>)</code></pre></div>
<p><img src="book_files/figure-html/dollars-per-day-log-scale-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Note that the log base 10 transformation has its own function: <code>scale_x_log10()</code>, but currently base 2 does not, although we could easily define our own.</p>
<p>There are other transformations available through the <code>trans</code> argument. As we learn later on, the square root (<code>sqrt</code>) transformation, for example, is useful when considering counts. The logistic transformation (<code>logit</code>) is useful when plotting proportions between 0 and 1. The <code>reverse</code> transformation is useful when we want smaller values to be on the right or on top.</p>
</div>
</div>
<div id="modes" class="section level2">
<h2><span class="header-section-number">20.8</span> Modes</h2>
<p>In statistics these bumps are sometimes referred to as <em>modes</em>. The mode of a distribution is the value with the highest frequency. The mode of the normal distribution is the average. When a distribution, like the one above, doesn’t monotonically decrease from the mode, we call the locations where it goes up and down again local modes and say that the distribution has multiple modes.</p>
<p>The histogram above suggests that the 1970 country income distribution has two modes: one at about 2 dollars per day (1 in the log 2 scale) and another at about 32 dollars per day (5 in the log 2 scale). This <em>bimodality</em> is consistent with a dichotomous world made up of countries with average incomes less than $8 (3 in the log 2 scale) a day and countries above that.</p>
</div>
<div id="stratify-and-boxplot" class="section level2">
<h2><span class="header-section-number">20.9</span> Stratify and boxplot</h2>
<p>The histogram showed us that the income distribution values show a dichotomy. However, the histogram does not show us if the two groups of countries are <em>west</em> versus the <em>developing</em> world.</p>
<p>To see distributions by geographical region, we first stratify the data into regions and then examine the distribution for each. Because of the number of regions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">n_distinct</span>(gapminder<span class="op">$</span>region)
<span class="co">#&gt; [1] 22</span></code></pre></div>
<p>looking at histograms or smooth densities for each will not be useful. Instead, we can stack boxplots next to each other:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(region, dollars_per_day)) 
p <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>() </code></pre></div>
<p><img src="book_files/figure-html/dollars-per-day-boxplot-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Now we can’t read the region names because the default gpplot2 behavior is to write the labels horizontally and here we run out of room. We can easily fix this by rotating the labels. Consulting the cheat sheet we find we can rotate the names by changing the <code>theme</code> through <code>element_text</code>. The <code>hjust=1</code> justifies the text so that it is next to the axis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</code></pre></div>
<p><img src="book_files/figure-html/dollars-per-day-boxplot-rotate-labels-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>We can already see that there is indeed a “west versus the rest” dichotomy.</p>
<div id="do-not-order-alphabetically" class="section level3 unnumbered">
<h3>Do not order alphabetically</h3>
<p>There are a few more adjustments we can make to this plot that help uncover this reality. First, it helps to order the regions in the boxplots from poor to rich rather than alphabetically. This can be achieved using the <code>reorder</code> function. This function lets us change the order of the levels of a factor variable based on a summary computed on a numeric vector. Remember that many graphing functions coerce character vectors into a factor. The default behavior results in alphabetically ordered levels:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fac &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;Asia&quot;</span>, <span class="st">&quot;Asia&quot;</span>, <span class="st">&quot;West&quot;</span>, <span class="st">&quot;West&quot;</span>, <span class="st">&quot;West&quot;</span>))
<span class="kw">levels</span>(fac)
<span class="co">#&gt; [1] &quot;Asia&quot; &quot;West&quot;</span>

value &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">6</span>, <span class="dv">4</span>)
fac &lt;-<span class="st"> </span><span class="kw">reorder</span>(fac, value, <span class="dt">FUN =</span> mean)
<span class="kw">levels</span>(fac)
<span class="co">#&gt; [1] &quot;West&quot; &quot;Asia&quot;</span></code></pre></div>
<p>Second, we can use color to distinguish the different continents, a visual cue that helps find specific regions. Here is the code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">region =</span> <span class="kw">reorder</span>(region, dollars_per_day, <span class="dt">FUN =</span> median)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(region, dollars_per_day, <span class="dt">fill =</span> continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>)
p</code></pre></div>
<p><img src="book_files/figure-html/dollars-per-day-by-continent-boxplot-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>This plot shows two clear groups, with the rich group composed of North America, Northern and Western Europe, New Zealand and Australia. As with the histogram, if we remake the plot using a log scale:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p <span class="op">+</span><span class="st"> </span><span class="kw">scale_y_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>)</code></pre></div>
<p><img src="book_files/figure-html/dollars-per-day-by-continent-boxplot-log-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>we are better able to see differences within the developing world.</p>
</div>
<div id="show-the-data" class="section level3 unnumbered">
<h3>Show the data</h3>
<p>In many cases, we do not show the data because it adds clutter to the plot and obfuscates the message. In the example above, we don’t have that many points so adding them actually lets us see all the data. We can add this layer using geom_point():</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p <span class="op">+</span><span class="st"> </span><span class="kw">scale_y_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) </code></pre></div>
<p><img src="book_files/figure-html/boxplot-with-points-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="comparing-distributions" class="section level2">
<h2><span class="header-section-number">20.10</span> Comparing distributions</h2>
<p>The exploratory data analysis above has revealed two characteristics about average income distribution in 1970. Using a histogram, we found a bimodal distribution with the modes relating to poor and rich countries. Then by stratifying by region and examining boxplots, we found that the rich countries were mostly in Europe and Northern America, along with Australia and New Zealand. We define a vector with these regions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">west &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Western Europe&quot;</span>,
          <span class="st">&quot;Northern Europe&quot;</span>,
          <span class="st">&quot;Southern Europe&quot;</span>,
          <span class="st">&quot;Northern America&quot;</span>,
          <span class="st">&quot;Australia and New Zealand&quot;</span>)</code></pre></div>
<p>Now we want to focus on comparing the differences in distributions across time.</p>
<p>We start by confirming that the bimodality observed in 1970 is explained by a “west versus developing world” dichotomy. We do this by creating histograms for the previously identified groups. We create the two groups with an <code>ifelse</code> inside a <code>mutate</code> and then we use <code>facet_grid</code> to make a histogram for each group:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">group =</span> <span class="kw">ifelse</span>(region<span class="op">%in%</span>west, <span class="st">&quot;West&quot;</span>, <span class="st">&quot;Developing&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>group)</code></pre></div>
<p><img src="book_files/figure-html/income-hist-west-v-developing-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Now we are ready to see if the separation is worse today than it was 40 years ago. We do this by faceting by both region and year:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">past_year &lt;-<span class="st"> </span><span class="dv">1970</span>
present_year &lt;-<span class="st"> </span><span class="dv">2010</span>
gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(past_year, present_year) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">group =</span> <span class="kw">ifelse</span>(region<span class="op">%in%</span>west, <span class="st">&quot;West&quot;</span>, <span class="st">&quot;Developing&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">facet_grid</span>(year <span class="op">~</span><span class="st"> </span>group)</code></pre></div>
<p><img src="book_files/figure-html/income-hist-west-v-developing-two-years-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Before we interpret the findings of this plot, we notice that there are more countries represented in the 2010 histograms than in 1970: the total counts are larger. One reason for this is that several countries were founded after 1970. For example, the Soviet Union divided into several countries, including Russia and Ukraine, during the 1990s. Another reason is that data was available for more countries in 2010.</p>
<p>We remake the plots using only countries with data available for both years. In the data wrangling chapter, we will learn <strong>tidyverse</strong> tools that permit us to write efficient code for this, but here we can use simple code using the <code>intersect</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">country_list_<span class="dv">1</span> &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(dollars_per_day)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>.<span class="op">$</span>country

country_list_<span class="dv">2</span> &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>present_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(dollars_per_day)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>.<span class="op">$</span>country
      
country_list &lt;-<span class="st"> </span><span class="kw">intersect</span>(country_list_<span class="dv">1</span>, country_list_<span class="dv">2</span>)</code></pre></div>
<p>These 108 account for 86 % of the world population, so this subset should be representative.</p>
<p>Let’s remake the plot, but only for this subset by simply adding <code>country %in% country_list</code> to the filter function: <img src="book_files/figure-html/income-histogram-west-v-devel-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>We now see that while the rich countries have become a bit richer, percentage-wise, the poor countries appear to have improved more. In particular, we see that the proportion of <em>developing</em> countries earning more than $16 a day increases substantially.</p>
<p>To see which specific regions improved the most, we can remake the boxplots we made above but now adding the year 2010:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(past_year, present_year) <span class="op">&amp;</span><span class="st"> </span>country <span class="op">%in%</span><span class="st"> </span>country_list) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>)  </code></pre></div>
<p>and then using facet to compare the two years:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(region, dollars_per_day, <span class="dt">fill =</span> continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_grid</span>(year<span class="op">~</span>.)</code></pre></div>
<p><img src="book_files/figure-html/income-histogram-by-region-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Here, we pause to introduce another powerful <strong>ggplot2</strong> feature. Because we want to compare each region before and after, it would be convenient to have the 1970 boxplot next to the 2010 boxplot for each region. In general, comparisons are easier when data are plotted next to each other.</p>
<p>So instead of faceting, we keep the data from each year together and ask to color (or fill) them depending on the year. Note that groups are automatically separated by year and each pair of boxplots drawn next to each other. Finally, because year is a number, we turn it into a factor since <strong>ggplot2</strong> automatically assigns a color to each category of a factor:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(region, dollars_per_day, <span class="dt">fill =</span> <span class="kw">factor</span>(year)))</code></pre></div>
<p><img src="book_files/figure-html/income-histogram-west-v-devel-by-year-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Finally, we point out that if what we are most interested is in comparing before and after values, it might make more sense to plot the ratios, or difference in the log scale. We are still not ready to learn to code this, but here is what the plot would look like:</p>
<p><img src="book_files/figure-html/income-west-v-devel-before-after-ratio-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div id="density-plots" class="section level3 unnumbered">
<h3>Density plots</h3>
<p>We have used data exploration to discover that the income gap between rich and poor countries has narrowed considerably during the last 40 years. We used a series of histograms and boxplots to see this. Here we suggest a succinct way to convey this message with just one plot. We will use smooth density plots.</p>
<p>Let’s start by noting that density plots for income distribution in 1970 and 2010 deliver the message that the gap is closing:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(past_year, present_year) <span class="op">&amp;</span><span class="st"> </span>country <span class="op">%in%</span><span class="st"> </span>country_list) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">fill =</span> <span class="st">&quot;grey&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">facet_grid</span>(year<span class="op">~</span>.)</code></pre></div>
<p><img src="book_files/figure-html/income-smooth-density-by-year-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>In the 1970 plot, we see two clear modes: poor and rich countries. In 2010, it appears that some of the poor countries have shifted towards the right, closing the gap.</p>
<p>The next message we need to convey is that the reason for this change in distribution is that poor countries became richer, rather than some rich countries becoming poorer. To do this, we need to assign a color to the groups we identified during data exploration.</p>
<p>However, we first need to learn how to make these smooth densities in a way that preserves information on the number of countries in each group. To understand why we need this, note the discrepancy in the size of each group:</p>
<table>
<thead>
<tr class="header">
<th align="left">group</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Developing</td>
<td align="right">87</td>
</tr>
<tr class="even">
<td align="left">West</td>
<td align="right">21</td>
</tr>
</tbody>
</table>
<p>However, when we overlay two densities, the default is to have the area represented by each distribution add up to 1, regardless of the size of each group:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(past_year, present_year) <span class="op">&amp;</span><span class="st"> </span>country <span class="op">%in%</span><span class="st"> </span>country_list) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">group =</span> <span class="kw">ifelse</span>(region <span class="op">%in%</span><span class="st"> </span>west, <span class="st">&quot;West&quot;</span>, <span class="st">&quot;Developing&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day, <span class="dt">fill =</span> group)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">facet_grid</span>(year <span class="op">~</span><span class="st"> </span>.)</code></pre></div>
<p><img src="book_files/figure-html/income-smooth-density-by-year-west-v-developing-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>which makes it appear as if there are the same number of countries in each group. To change this, we will need to learn to access computed variables with <code>geom_density</code> function.</p>
</div>
<div id="accessing-computed-variables" class="section level3 unnumbered">
<h3>Accessing computed variables</h3>
<p>To have the areas of these densities be proportional to the size of the groups, we can simply multiply the y-axis values by the size of the group. From the <code>geom_density</code> help file, we see that the functions compute a variable called <code>count</code> that does exactly this. We want this variable to be on the y-axis rather than the density.</p>
<p>In <strong>ggplot2</strong>, we access these variables by surrounding the name with two dots <code>..</code>. So we will use the following mapping:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aes</span>(<span class="dt">x =</span> dollars_per_day, <span class="dt">y =</span> ..count..)</code></pre></div>
<p>We can now create the desired plot by simply changing the mapping in the previous code chunk:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(past_year, present_year) <span class="op">&amp;</span><span class="st"> </span>country <span class="op">%in%</span><span class="st"> </span>country_list) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">group =</span> <span class="kw">ifelse</span>(region <span class="op">%in%</span><span class="st"> </span>west, <span class="st">&quot;West&quot;</span>, <span class="st">&quot;Developing&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day, <span class="dt">y =</span> ..count.., <span class="dt">fill =</span> group)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>)

p <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>(year <span class="op">~</span><span class="st"> </span>.)</code></pre></div>
<p><img src="book_files/figure-html/income-smooth-density-counts-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>If we want the densities to be smoother, we use the <code>bw</code> argument. We tried a few and decided on 0.75:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>, <span class="dt">bw =</span> <span class="fl">0.75</span>) <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>(year <span class="op">~</span><span class="st"> </span>.)</code></pre></div>
<p><img src="book_files/figure-html/income-smooth-density-counts-by-year-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>This plot now shows what is happening very clearly. The developing world distribution is changing. A third mode appears consisting of the countries that most narrowed the gap.</p>
</div>
<div id="case_when" class="section level3">
<h3><span class="header-section-number">20.10.1</span> ‘case_when’</h3>
<p>We can actually make this figure somewhat more informative. From the exploratory data analysis, we noticed that many of the countries that most improved were from Asia. We can easily alter the plot to show key regions separately.</p>
<p>We introduce the <code>case_when</code> function which is useful for defining groups. It currently does not have a data argument (this might change) so we need to access the components of our data table using the dot placeholder:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">group =</span> <span class="kw">case_when</span>(
    .<span class="op">$</span>region <span class="op">%in%</span><span class="st"> </span>west <span class="op">~</span><span class="st"> &quot;West&quot;</span>,
    .<span class="op">$</span>region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Eastern Asia&quot;</span>, <span class="st">&quot;South-Eastern Asia&quot;</span>) <span class="op">~</span><span class="st"> &quot;East Asia&quot;</span>,
    .<span class="op">$</span>region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Caribbean&quot;</span>, <span class="st">&quot;Central America&quot;</span>, <span class="st">&quot;South America&quot;</span>) <span class="op">~</span><span class="st"> &quot;Latin America&quot;</span>,
    .<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Africa&quot;</span> <span class="op">&amp;</span><span class="st"> </span>.<span class="op">$</span>region <span class="op">!=</span><span class="st"> &quot;Northern Africa&quot;</span> <span class="op">~</span><span class="st"> &quot;Sub-Saharan Africa&quot;</span>,
    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Others&quot;</span>))</code></pre></div>
<p>We turn this <code>group</code> variable into a factor to control the order of the levels:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">group =</span> <span class="kw">factor</span>(group, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Others&quot;</span>, <span class="st">&quot;Latin America&quot;</span>, <span class="st">&quot;East Asia&quot;</span>,
                                          <span class="st">&quot;Sub-Saharan Africa&quot;</span>, <span class="st">&quot;West&quot;</span>)))</code></pre></div>
<p>We pick this particular order for a reason that becomes clear later.</p>
<p>Now we can now easily plot the densities for each region. We use <code>color</code> and <code>size</code> to clearly see the tops:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(past_year, present_year) <span class="op">&amp;</span><span class="st"> </span>country <span class="op">%in%</span><span class="st"> </span>country_list) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day, <span class="dt">y =</span> ..count.., <span class="dt">fill =</span> group, <span class="dt">color =</span> group)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>)

p <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>, <span class="dt">bw =</span> <span class="fl">0.75</span>, <span class="dt">size =</span> <span class="dv">2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>(year <span class="op">~</span><span class="st"> </span>.)</code></pre></div>
<p><img src="book_files/figure-html/income-smooth-density-by-region-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>The plot is cluttered and somewhat hard to read. A clearer picture is sometimes achieved by stacking the densities on top of each other:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>, <span class="dt">bw =</span> <span class="fl">0.75</span>, <span class="dt">position =</span> <span class="st">&quot;stack&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>(year <span class="op">~</span><span class="st"> </span>.)</code></pre></div>
<p><img src="book_files/figure-html/income-smooth-density-counts-by-region-and-year-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Here we can clearly see how the distributions for East Asia, Latin America and others shift markedly to the right. While Sub-Saharan Africa remains stagnant.</p>
<p>Notice that we order the levels of the group so that the West’s density are plotted first, then Sub-Saharan Africa. Having the two extremes plotted first allows us to see the remaining bimodality better.</p>
</div>
<div id="weighted-densities" class="section level3 unnumbered">
<h3>Weighted densities</h3>
<p>As a final point, we note that these distributions weigh every country the same. So if most of the population is improving, but living in a very large country, such as China, we might not appreciate this. We can actually weight the smooth densities using the <code>weight</code> mapping argument. The plot then looks like this:</p>
<p><img src="book_files/figure-html/income-smooth-density-counts-by-region-year-weighted-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>This particular figure shows very clearly how the income distribution gap is closing with most of the poor remaining in Sub-Saharan Africa.</p>
</div>
</div>
<div id="ecological-fallacy" class="section level2">
<h2><span class="header-section-number">20.11</span> Ecological fallacy</h2>
<p>Throughout this section, we have been comparing regions of the world. We have seen that, on average, some regions do better than others. In this section, we focus on describing the importance of variability within the groups when examining the relationship between a country’s infant mortality rates and average income.</p>
<p>We start by comparing these quantities across regions, but before doing this, we define a few more regions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">group =</span> <span class="kw">case_when</span>(
    .<span class="op">$</span>region <span class="op">%in%</span><span class="st"> </span>west <span class="op">~</span><span class="st"> &quot;The West&quot;</span>,
    .<span class="op">$</span>region <span class="op">%in%</span><span class="st"> &quot;Northern Africa&quot;</span> <span class="op">~</span><span class="st"> &quot;Northern Africa&quot;</span>,
    .<span class="op">$</span>region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Eastern Asia&quot;</span>, <span class="st">&quot;South-Eastern Asia&quot;</span>) <span class="op">~</span><span class="st"> &quot;East Asia&quot;</span>,
    .<span class="op">$</span>region <span class="op">==</span><span class="st"> &quot;Southern Asia&quot;</span><span class="op">~</span><span class="st"> &quot;Southern Asia&quot;</span>,
    .<span class="op">$</span>region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Central America&quot;</span>, <span class="st">&quot;South America&quot;</span>, <span class="st">&quot;Caribbean&quot;</span>) <span class="op">~</span><span class="st"> &quot;Latin America&quot;</span>,
    .<span class="op">$</span>continent <span class="op">==</span><span class="st"> &quot;Africa&quot;</span> <span class="op">&amp;</span><span class="st"> </span>.<span class="op">$</span>region <span class="op">!=</span><span class="st"> &quot;Northern Africa&quot;</span> <span class="op">~</span><span class="st"> &quot;Sub-Saharan Africa&quot;</span>,
    .<span class="op">$</span>region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Melanesia&quot;</span>, <span class="st">&quot;Micronesia&quot;</span>, <span class="st">&quot;Polynesia&quot;</span>) <span class="op">~</span><span class="st"> &quot;Pacific Islands&quot;</span>))</code></pre></div>
<p>We then compute these quantities for each region:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">surv_income &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>present_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp) <span class="op">&amp;</span><span class="st"> </span>
<span class="st">           </span><span class="op">!</span><span class="kw">is.na</span>(infant_mortality) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(group)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(group) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">income =</span> <span class="kw">sum</span>(gdp)<span class="op">/</span><span class="kw">sum</span>(population)<span class="op">/</span><span class="dv">365</span>,
            <span class="dt">infant_survival_rate =</span> 
              <span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="kw">sum</span>(infant_mortality<span class="op">/</span><span class="dv">1000</span><span class="op">*</span>population)<span class="op">/</span><span class="kw">sum</span>(population)) 

surv_income <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(income)
<span class="co">#&gt; # A tibble: 7 x 3</span>
<span class="co">#&gt;   group              income infant_survival_rate</span>
<span class="co">#&gt;   &lt;chr&gt;               &lt;dbl&gt;                &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Sub-Saharan Africa   1.76                0.936</span>
<span class="co">#&gt; 2 Southern Asia        2.07                0.952</span>
<span class="co">#&gt; 3 Pacific Islands      2.70                0.956</span>
<span class="co">#&gt; 4 Northern Africa      4.94                0.970</span>
<span class="co">#&gt; 5 Latin America       13.2                 0.983</span>
<span class="co">#&gt; 6 East Asia           13.4                 0.985</span>
<span class="co">#&gt; # ... with 1 more row</span></code></pre></div>
<p>This shows a dramatic difference. While in the West less than 0.5% of infants die, in Sub-Saharan Africa the rate is higher than 6%! The relationship between these two variables is almost perfectly linear:</p>
<p><img src="book_files/figure-html/ecological-fallacy-averages-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>In this plot, we introduce the use of the <code>limit</code> argument which lets us change the range of the axes. We are making the range larger than the data requires because we will later compare this plot to one with more variability and we want the ranges to be the same. We also introduce the <code>breaks</code> argument, which lets us set the location of the axes labels. Finally, we introduce a new transformation, the logistic transformation.</p>
<div id="logistic-transformation" class="section level3 unnumbered">
<h3>Logistic transformation</h3>
<p>The logistic or logit transformation for a proportion or rate <span class="math inline">\(p\)</span> is defined as:</p>
<p><span class="math display">\[f(p) = \log \left( \frac{p}{1-p} \right)\]</span></p>
<p>When <span class="math inline">\(p\)</span> is a proportion or probability, the quantity that is being logged, <span class="math inline">\(p/(1-p)\)</span> is called the <em>odds</em>. In this case <span class="math inline">\(p\)</span> is the proportion of infants that survived. The odds tell us how many more infants are expected to survive than to die. The log transformation makes this symmetric. If the rates are the same, then the log odds is 0. Fold increases or decreases turn into positive and negative increments respectively.</p>
<p>This scale is useful when we want to highlight differences near 0 or 1. For survival rates this is important because a survival rate of 90% is unacceptable, while a survival of 99% is relatively good. We would much prefer a survival rate closer to 99.9%. We want our scale to highlight these difference and the logit does this. Note that 99.9/0.1 is about 10 times bigger than 99/1 which is about 10 times larger than 90/10. By using the log, these fold changes turn into constant increases.</p>
</div>
<div id="show-the-data-1" class="section level3 unnumbered">
<h3>Show the data</h3>
<p>Now, back to our plot. Based on the plot above, do we conclude that a country with a low income is destined to have low survival rate? Do we conclude that all survival rates in Sub-Saharan Africa are all lower than in Southern Asia, which in turn are lower than in the Pacific Islands, and so on?</p>
<p>Jumping to this conclusion based on a plot showing averages is referred to as the <em>ecological fallacy</em>. The almost perfect relationship between survival rates and income is only observed for the averages at the region level. Once we show all the data, we see a somewhat more complicated story:</p>
<p><img src="book_files/figure-html/ecological-fallacy-all-data-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Specifically, we see that there is a large amount of variability. We see that countries from the same regions can be quite different and that countries with the same income can have different survival rates. For example, while on average Sub-Saharan Africa had the worse health and economic outcomes, there is wide variability within that group. Mauritius and Botswana are doing better than Angola and Sierra Leone, with Mauritius comparable to Western countries.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ggplot2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-visualization-principles.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rafalab/dsbook/edit/master/dataviz/gapminder.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
